<!-- 文本编辑器 -->
<template>
	<div v-if="isBusy > 0" class="mask" :style="{
		'position': 'fixed',
		'left': '0',
		'top': '0',
		'height': '100%',
		'width': '100%',
		'z-index': '10',
		'background': 'rgba(200,200,200,0.5)',
		'text-align': 'center'
	}">
		<div :style="{
			'display': 'inline-block',
			'vertical-align': 'middle',
			'margin': '20% auto',
			'color': 'rgb(199,29,35)',
			'font-weight': '700',
		}">
			<div :style="{
				'display': 'inline-block',
				'width': '15px',
				'vertical-align': 'middle',
				'aspect-ratio': '1',
				'margin': '0 30px',
				'borderRadius': '15px',
				'border': '5px dotted rgb(199,29,35)',
				'animation': 'rotate 1s infinite linear'
			}"></div>
			<span style="font-size: 25px;">{{ busyTip }}...</span>
		</div>
	</div>
	<div id="editor-wrapper" v-if="editor && provider">
		<!-- 气泡菜单 除了样式不要乱改 -->
		<bubble-menu :editor="editor" class="editor-bubble-menu">
			<div v-if="editor.isActive('codeBlock') === false">
				<div>
					<!-- 加粗 -->
					<button @click="editor.chain().focus().toggleBold().run()"
						:disabled="!editor.can().chain().focus().toggleBold().run()"
						:class="{ 'is-active': editor.isActive('bold') }">
						<svg t="1693120857543" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="10125" width="15" height="15">
							<path
								d="M385.692278 918.576916 390.80771 919.307658C421.012953 920.769221 443.423035 921.499963 458.03843 921.499963 545.73119 921.499963 609.551045 905.545019 649.499963 873.63458 689.448881 841.724219 709.423104 790.449073 709.423104 719.807724 709.423104 655.986846 690.66689 608.365568 653.153831 576.942316 615.640852 545.519065 559.372209 529.807675 484.346171 529.807675 462.422961 529.807675 444.153935 530.051308 429.538462 530.538496 414.922988 531.025605 400.307751 531.756426 385.692278 532.730801L385.692278 918.576916ZM386.423099 445.769255C390.320522 446.256443 395.192241 446.621775 401.038494 446.865408 406.884667 447.108962 415.410176 447.23074 426.615414 447.23074 504.5645 447.23074 561.929295 431.51935 598.711532 400.096177 635.49377 368.672926 653.884652 319.590085 653.884652 252.846159 653.884652 194.384345 636.833477 151.025822 602.730732 122.76925 568.628066 94.512679 516.256768 80.38463 445.615419 80.38463 433.922993 80.38463 415.410412 81.358927 390.076889 83.307678L385.692278 83.307678 386.423099 445.769255ZM78.769231 0 528.192276 0C638.295434 0 721.115136 19.608812 776.653824 58.82691 832.192591 98.045086 859.961502 156.62781 859.961502 234.576896 859.961502 293.525898 841.936108 342.852372 805.884613 382.557657 769.833118 422.26302 716.731156 451.371717 646.576916 469.884613 732.320926 471.346176 799.063828 493.268992 846.80767 535.653849 894.551513 578.038705 918.423079 636.499653 918.423079 711.038425 918.423079 805.551734 886.026004 878.018954 821.23075 928.442289 756.435574 978.865625 663.141612 1004.076898 541.346186 1004.076898L78.769231 1004.076898 78.769231 931.000005 167.19234 922.961526 191.307697 899.576911 191.307697 101.57694 167.19234 80.38463 78.769231 73.076894 78.769231 0Z"
								fill="#000000" p-id="10126"></path>
						</svg>
					</button>
					<!-- 斜体 -->
					<button @click="editor.chain().focus().toggleItalic().run()"
						:disabled="!editor.can().chain().focus().toggleItalic().run()"
						:class="{ 'is-active': editor.isActive('italic') }">
						<svg t="1693059386616" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="2334" width="15" height="15">
							<path
								d="M760.198095 97.52381v73.142857h-127.804952l-189.464381 707.047619h146.627048v73.142857H243.809524v-73.142857h123.392l189.44-707.047619H414.47619V97.52381h345.721905z"
								p-id="2335"></path>
						</svg>
					</button>
					<!-- 删除线 -->
					<button @click="editor.chain().focus().toggleStrike().run()"
						:disabled="!editor.can().chain().focus().toggleStrike().run()"
						:class="{ 'is-active': editor.isActive('strike') }">
						<svg t="1693059874309" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3819" width="15" height="15">
							<path
								d="M756.037818 539.624727c61.998545 40.634182 93.486545 96.977455 93.486546 169.053091 0 71.493818-30.487273 128.954182-90.274909 171.194182-57.437091 39.796364-133.632 59.764364-228.584728 59.764364-96.116364 0-172.334545-22.272-227.421091-65.629091-63.301818-50.408727-98.443636-126.650182-105.495272-227.421091h70.330181c8.215273 78.498909 35.165091 137.146182 82.059637 175.825454 42.193455 34.001455 102.004364 51.595636 179.362909 51.595637 73.844364 0 133.632-15.290182 179.339636-43.426909 44.544-29.253818 68.002909-69.12 68.002909-118.365091 0-57.437091-29.323636-101.981091-85.597091-133.632-18.338909-10.705455-50.641455-23.901091-97.256727-38.958546H221.090909a34.909091 34.909091 0 0 1 0-69.818182h145.105455c-22.853818-8.448-39.959273-15.965091-51.2-22.528-64.512-36.328727-96.162909-89.088-96.162909-157.044363 0-72.680727 29.323636-127.790545 90.298181-166.469818C363.008 87.412364 433.338182 69.818182 517.748364 69.818182c91.461818 0 164.119273 22.272 218.018909 66.816 55.109818 44.544 86.760727 110.173091 93.789091 196.957091h-71.517091c-9.355636-65.629091-33.978182-114.874182-73.844364-148.875637-39.866182-34.001455-96.116364-50.408727-168.797091-50.408727-68.002909 0-120.738909 11.729455-159.418182 35.141818-44.544 25.832727-65.629091 65.675636-65.629091 118.411637 0 46.917818 25.762909 83.223273 78.49891 111.36 24.669091 11.729455 78.545455 30.510545 160.628363 53.922909 20.014545 5.725091 38.772364 11.264 56.32 16.663272H826.181818a34.909091 34.909091 0 0 1 0 69.818182h-70.144z"
								p-id="3820"></path>
						</svg>
					</button>
					<!-- 下划线 -->
					<button @click="editor.chain().focus().toggleUnderline().run()"
						:disabled="!editor.can().chain().focus().toggleUnderline().run()"
						:class="{ 'is-active': editor.isActive('underline') }">
						<svg t="1693059944194" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="4797" width="15" height="15">
							<path
								d="M360.423619 85.333333v73.142857H280.380952v319.561143c0 118.662095 99.718095 215.942095 224.889905 219.331048l6.729143 0.097524c128.292571 0 231.619048-98.645333 231.619048-219.428572V158.47619H658.285714v-73.142857h238.518857v73.142857H816.761905v319.561143c0 159.50019-132.705524 288.597333-297.155048 292.473905l-7.606857 0.097524c-167.936 0-304.761905-130.608762-304.761905-292.571429V158.47619H121.904762v-73.142857h238.518857zM170.666667 902.095238h685.007238v-73.142857H170.666667v73.142857z"
								p-id="4798"></path>
						</svg>
					</button>
					<!-- 字体 -->
					<select v-model="selectedFontFamily" @change="changeFont"
						:style="{ 'font-family': `${selectedFontFamily}` }">
						<option v-for="fontOption in fontOptions" :value="fontOption.value" :key="fontOption.value"
							:style="{ 'font-family': `${fontOption.label}` }">
							{{ fontOption.label }}
						</option>
					</select>
				</div>
				<!-- 背景色仅放到选中文字时的弹出菜单（最后一个是橡皮擦） -->
				<div>
					<!-- 橙色强调 #ffc078 -->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#ffc078' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#ffc078' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#ffc178"></path>
						</svg>
					</button>
					<!-- 绿色强调 #8ce99a -->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#8ce99a' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#8ce99a' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#8ce99a"></path>
						</svg>
					</button>
					<!-- 蓝色强调 #74c0fc -->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#74c0fc' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#74c0fc' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#74c0fc"></path>
						</svg>
					</button>
					<!-- 紫色强调 #b197fc -->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#b197fc' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#b197fc' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#b197fc"></path>
						</svg>
					</button>
					<!-- 深红色强调 #cd4444 -->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#ce4444' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#ce4444' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#cd4444"></path>
						</svg>
					</button>
					<!-- 浅红色强调 #ee9999-->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#ee9999' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#ee9999' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#ee9999"></path>
						</svg>
					</button>
					<!-- 深灰色强调 #616161-->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#616161' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#616161' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#616161"></path>
						</svg>
					</button>
					<!-- 浅灰色强调 #dddddd-->
					<button @click="editor.chain().focus().toggleHighlight({ color: '#dddddd' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#dddddd' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#dddddd"></path>
						</svg>
					</button>
					<!-- 粉色强调 #fa8aa7
					<button @click="editor.chain().focus().toggleHighlight({ color: '#fa8aa7' }).run()"
						:class="{ 'is-active': editor.isActive('highlight', { color: '#fa8aa7' }) }">
						<svg t="1693060307610" class="icon" viewBox="0 0 1025 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13261" width="20" height="20">
							<path
								d="M1016.525 493.875c-9.984-9.984-26.215-9.984-36.199 0L796.723 677.478c-29.952 29.952-78.694 29.952-108.595 0L448.922 438.272c-14.439-14.438-22.375-33.69-22.375-54.323s7.936-39.885 22.375-54.323l183.603-183.604c9.984-9.984 9.984-26.214 0-36.198s-26.215-9.984-36.199 0L412.723 293.427c-24.115 24.115-37.376 56.218-37.376 90.522 0 14.592 2.458 28.825 7.066 42.189L7.526 801.024C2.714 805.837 0.051 812.339 0.051 819.149v76.8c0 14.131 11.469 25.6 25.6 25.6h486.4c6.81 0 13.312-2.714 18.125-7.475l170.086-170.087c13.364 4.66 27.597 7.066 42.19 7.066 34.252 0 66.406-13.261 90.52-37.376l183.604-183.603c9.984-9.984 9.984-26.215 0-36.199zM501.402 870.4H51.2v-40.602l358.502-358.502c1.024 1.075 1.997 2.15 3.021 3.174L651.93 713.677a88.439 88.439 0 0 0 3.174 3.02L501.402 870.4z"
								p-id="13262" fill="#fa8aa7"></path>
						</svg>
					</button> -->
					<!-- 清除标记 -->
					<button
						@click="editor.chain().focus().unsetAllMarks().run(); editor.chain().focus().clearNodes().run()">
						<svg t="1693060935327" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="15726" width="20" height="20">
							<path
								d="M667.257905 139.873524l3.85219 3.632762 252.903619 254.537143a73.142857 73.142857 0 0 1 0 103.107047L604.501333 822.686476H828.952381v73.142857H266.532571l-172.129523-173.226666a73.142857 73.142857 0 0 1 0-103.131429L567.344762 143.530667a73.142857 73.142857 0 0 1 99.913143-3.632762zM227.181714 589.604571L146.285714 671.036952l150.674286 151.649524h163.303619l-233.081905-233.081905zM619.227429 195.047619L278.747429 537.721905l253.70819 253.70819 339.675429-341.820952L619.227429 195.047619z"
								p-id="15727"></path>
						</svg>
					</button>
				</div>

			</div>
		</bubble-menu>
		<!-- 悬浮菜单 -->
		<floating-menu :editor="editor" class="editor-floating-menu">
			<!-- h1 -->
			<button @click="editor.chain().focus().toggleHeading({ level: 1 }).run()"
				:class="{ 'is-active': editor.isActive('heading', { level: 1 }) }">
				<svg t="1693061041243" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="1321" width="20" height="20">
					<path
						d="M584.9 445.3V142.6h86.5v735h-86.5V531.7H152.5v345.9H66.1v-735h86.5v302.6l432.3 0.1zM843.7 877.6v-0.3h-79.8V826h79.8V558.6c-22.5 23.4-49.9 40.4-79.8 49.3v-59.1c17.2-5.2 33.8-12.9 49.1-23 16.2-10.6 30.9-23.7 43.9-38.9h39.9V826h61.7v51.3h-61.7v0.3h-53.1z"
						p-id="1322"></path>
				</svg>
			</button>
			<!-- h2 -->
			<button @click="editor.chain().focus().toggleHeading({ level: 2 }).run()"
				:class="{ 'is-active': editor.isActive('heading', { level: 2 }) }">
				<svg t="1693061118323" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="1479" width="20" height="20">
					<path
						d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276z m935.282 448H680c0.479-41.591 10.533-77.923 30.163-108.997 19.63-31.074 46.44-58.084 80.434-81.031 16.279-11.952 33.275-23.544 50.99-34.779 17.714-11.234 33.993-23.305 48.835-36.213 14.842-12.907 27.05-26.89 36.626-41.95 9.576-15.058 14.603-32.388 15.081-51.988 0-9.083-1.077-18.764-3.231-29.042-2.155-10.278-6.344-19.84-12.568-28.683-6.224-8.845-14.842-16.254-25.854-22.23-11.012-5.976-25.375-8.964-43.09-8.964-16.278 0-29.803 3.227-40.576 9.68-10.772 6.455-19.39 15.299-25.854 26.533-6.463 11.235-11.251 24.5-14.363 39.798-3.112 15.298-4.908 31.791-5.386 49.48h-81.87c0-27.728 3.71-53.423 11.13-77.087 7.422-23.664 18.553-44.101 33.395-61.311 14.842-17.21 32.916-30.715 54.222-40.516 21.305-9.8 46.081-14.7 74.33-14.7 30.641 0 56.255 5.02 76.843 15.059 20.587 10.04 37.224 22.707 49.912 38.005 12.688 15.298 21.665 31.91 26.931 49.838 5.267 17.927 7.9 35.018 7.9 51.272 0 20.078-3.112 38.244-9.336 54.498-6.224 16.254-14.603 31.193-25.136 44.818-10.533 13.625-22.502 26.174-35.908 37.647a538.302 538.302 0 0 0-41.653 32.27 1122.27 1122.27 0 0 0-43.09 28.683c-14.364 9.083-27.65 18.166-39.858 27.249-12.209 9.083-22.862 18.525-31.958 28.325-9.097 9.8-15.321 20.198-18.673 31.193h244.894V896z"
						p-id="1480"></path>
				</svg>
			</button>
			<!-- h3 -->
			<button @click="editor.chain().focus().toggleHeading({ level: 3 }).run()"
				:class="{ 'is-active': editor.isActive('heading', { level: 3 }) }">
				<svg t="1693061135842" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="1633" width="20" height="20">
					<path
						d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276zM815.551 597.802c13.128 0.47 26.257-0.469 39.385-2.813 13.129-2.344 24.85-6.447 35.165-12.308 10.316-5.86 18.638-13.948 24.968-24.263 6.33-10.315 9.494-22.975 9.494-37.978 0-21.1-7.15-37.978-21.45-50.638-14.301-12.66-32.704-18.989-55.21-18.989-14.066 0-26.257 2.813-36.572 8.44-10.315 5.626-18.872 13.245-25.67 22.857-6.799 9.612-11.84 20.395-15.121 32.352-3.283 11.956-4.69 24.263-4.22 36.923h-80.177c0.938-23.913 5.392-46.066 13.363-66.462 7.97-20.396 18.872-38.095 32.703-53.099 13.832-15.004 30.594-26.725 50.287-35.165C802.188 388.22 824.459 384 849.31 384c19.223 0 38.095 2.813 56.616 8.44 18.52 5.626 35.165 13.831 49.934 24.615 14.77 10.784 26.609 24.498 35.517 41.143 8.909 16.645 13.363 35.75 13.363 57.318 0 24.85-5.626 46.535-16.88 65.055-11.252 18.52-28.835 32-52.747 40.44v1.407c28.132 5.626 50.052 19.575 65.759 41.846 15.707 22.27 23.56 49.348 23.56 81.23 0 23.444-4.688 44.425-14.065 62.946-9.378 18.52-22.037 34.227-37.979 47.12-15.942 12.894-34.462 22.858-55.561 29.89-21.1 7.034-43.37 10.55-66.814 10.55-28.601 0-53.568-4.103-74.902-12.308-21.334-8.205-39.15-19.81-53.451-34.813-14.3-15.004-25.202-33.055-32.704-54.154-7.502-21.099-11.487-44.542-11.956-70.33h80.177c-0.938 30.008 6.447 54.975 22.154 74.902s39.268 29.89 70.682 29.89c26.726 0 49.114-7.62 67.166-22.857 18.051-15.239 27.077-36.923 27.077-65.055 0-19.224-3.751-34.462-11.253-45.715-7.502-11.252-17.348-19.81-29.539-25.67-12.19-5.86-25.905-9.494-41.143-10.901-15.239-1.407-30.828-1.875-46.77-1.407v-59.78z"
						p-id="1634"></path>
				</svg>
			</button>
			<!-- 代码块 -->
			<button @click="editor.chain().focus().toggleCodeBlock().run()"
				:class="{ 'is-active': editor.isActive('codeBlock') }">
				<svg t="1693060851190" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="14739" width="20" height="20">
					<path
						d="M213.344 192v213.344c0 32-66.144 64-85.344 64v85.344c19.2 0 85.344 32 85.344 64v213.344A105.6 105.6 0 0 0 320 938.688h85.344v-85.344H320c-12.8 0-21.344-8.544-21.344-21.344v-213.344c0-44.8-27.744-81.056-59.744-106.656 34.144-25.6 59.744-61.856 59.744-106.656V192c0-12.8 8.544-21.344 21.344-21.344h85.344V85.312H320a105.6 105.6 0 0 0-106.656 106.656zM810.656 405.344V192A105.6 105.6 0 0 0 704 85.344h-85.344v85.344H704c12.8 0 21.344 8.544 21.344 21.344v213.344c0 44.8 27.744 81.056 59.744 106.656-34.144 25.6-59.744 61.856-59.744 106.656v213.344c0 12.8-8.544 21.344-21.344 21.344h-85.344v85.344H704a105.6 105.6 0 0 0 106.656-106.656v-213.344c0-32 66.144-64 85.344-64v-85.344c-19.2 0-85.344-32-85.344-64z"
						p-id="14740"></path>
				</svg>
			</button>
			<!-- 块引用 -->
			<button @click="editor.chain().focus().toggleBlockquote().run()"
				:class="{ 'is-active': editor.isActive('blockquote') }">
				<svg t="1693117443196" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="9796" width="20" height="20">
					<path
						d="M235.710908 565.365418c3.442402-99.843986 20.061918-175.8521 49.92097-228.089835 29.827329-52.206012 76.305897-91.50097 139.435703-117.916597L349.324502 98.858542c-104.442724 47.073108-180.749644 116.493178-228.948389 208.29193C83.631234 376.007723 65.290517 487.336274 65.290517 641.107473l0 284.032962 332.234777 0L397.525294 565.365418 235.710908 565.365418zM769.351787 565.365418c3.442402-99.843986 20.061918-175.8521 49.92097-228.089835 29.827329-52.206012 76.305897-91.50097 139.435703-117.916597L882.965381 98.858542c-104.442724 47.073108-180.749644 116.493178-228.948389 208.29193-36.744879 68.857251-55.085596 180.185802-55.085596 333.957001l0 284.032962 332.234777 0L931.166173 565.365418 769.351787 565.365418z"
						p-id="9797"></path>
				</svg>
			</button>
			<!-- 插入表格 -->
			<button
				@click="editor.chain().focus().insertTable({ cols: 5, rows: 3, withHeaderRow: true, background: 'black' }).run()">
				<svg t="1693556919664" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"
					p-id="4237" width="20" height="20">
					<path
						d="M469.333333 298.666667v85.333333h256V298.666667h-256zM384 298.666667H298.666667v85.333333h85.333333V298.666667z m85.333333 426.666666h256v-256h-256v256z m-85.333333 0v-256H298.666667v256h85.333333zM213.333333 213.333333h597.333334v597.333334H213.333333V213.333333z"
						p-id="4238"></path>
				</svg>
			</button>
		</floating-menu>
		<!-- 顶部工具栏 -->
		<div class="editor-bar" v-show="!isReadOnly">
			<!-- 保存和返回 -->
			<div class="saves">
				<!-- 返回按钮 -->
				<button @click="$router.go(-1)" v-tooltip="'返回'">
					<svg t="1693232415241" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="6251" width="40" height="40">
						<path
							d="M395.21518 513.604544l323.135538-312.373427c19.052938-18.416442 19.052938-48.273447 0-66.660212-19.053961-18.416442-49.910737-18.416442-68.964698 0L291.75176 480.290811c-19.052938 18.416442-19.052938 48.273447 0 66.660212l357.633237 345.688183c9.525957 9.207709 22.01234 13.796214 34.497699 13.796214 12.485359 0 24.971741-4.588505 34.466999-13.82896 19.052938-18.416442 19.052938-48.242747 0-66.660212L395.21518 513.604544z"
							fill="#272636" p-id="6252"></path>
					</svg>
				</button>
				<!-- 保存为PDF -->
				<button @click="exportAsPDF" v-tooltip="'保存为PDF'">
					<svg t="1693118097402" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="8774" width="40" height="40">
						<path fill="rgba(199,29,35, 1)"
							d="M531.3 574.4l0.3-1.4c5.8-23.9 13.1-53.7 7.4-80.7-3.8-21.3-19.5-29.6-32.9-30.2-15.8-0.7-29.9 8.3-33.4 21.4-6.6 24-0.7 56.8 10.1 98.6-13.6 32.4-35.3 79.5-51.2 107.5-29.6 15.3-69.3 38.9-75.2 68.7-1.2 5.5 0.2 12.5 3.5 18.8 3.7 7 9.6 12.4 16.5 15 3 1.1 6.6 2 10.8 2 17.6 0 46.1-14.2 84.1-79.4 5.8-1.9 11.8-3.9 17.6-5.9 27.2-9.2 55.4-18.8 80.9-23.1 28.2 15.1 60.3 24.8 82.1 24.8 21.6 0 30.1-12.8 33.3-20.5 5.6-13.5 2.9-30.5-6.2-39.6-13.2-13-45.3-16.4-95.3-10.2-24.6-15-40.7-35.4-52.4-65.8zM421.6 726.3c-13.9 20.2-24.4 30.3-30.1 34.7 6.7-12.3 19.8-25.3 30.1-34.7z m87.6-235.5c5.2 8.9 4.5 35.8 0.5 49.4-4.9-19.9-5.6-48.1-2.7-51.4 0.8 0.1 1.5 0.7 2.2 2z m-1.6 120.5c10.7 18.5 24.2 34.4 39.1 46.2-21.6 4.9-41.3 13-58.9 20.2-4.2 1.7-8.3 3.4-12.3 5 13.3-24.1 24.4-51.4 32.1-71.4z m155.6 65.5c0.1 0.2 0.2 0.5-0.4 0.9h-0.2l-0.2 0.3c-0.8 0.5-9 5.3-44.3-8.6 40.6-1.9 45 7.3 45.1 7.4z"
							p-id="8775"></path>
						<path fill="rgba(199,29,35, 1)"
							d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"
							p-id="8776"></path>
					</svg>
				</button>
				<!-- 保存为Word -->
				<button @click="exportAsWord" v-tooltip="'保存为Word'">
					<svg t="1693118041836" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="8597" width="40" height="40">
						<path fill="#195cbe"
							d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"
							p-id="8598"></path>
						<path fill="#195cbe"
							d="M528.1 472h-32.2c-5.5 0-10.3 3.7-11.6 9.1L434.6 680l-46.1-198.7c-1.3-5.4-6.1-9.3-11.7-9.3h-35.4c-1.1 0-2.1 0.1-3.1 0.4-6.4 1.7-10.2 8.3-8.5 14.7l74.2 276c1.4 5.2 6.2 8.9 11.6 8.9h32c5.4 0 10.2-3.6 11.6-8.9l52.8-197 52.8 197c1.4 5.2 6.2 8.9 11.6 8.9h31.8c5.4 0 10.2-3.6 11.6-8.9l74.4-276c0.3-1 0.4-2.1 0.4-3.1 0-6.6-5.4-12-12-12H647c-5.6 0-10.4 3.9-11.7 9.3l-45.8 199.1-49.8-199.3c-1.3-5.4-6.1-9.1-11.6-9.1z"
							p-id="8599"></path>
					</svg>
				</button>
				<!-- 保存为markdown -->
				<button @click="exportAsMarkdown" v-tooltip="'保存为Markdown'">
					<svg t="1693374839969" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="4954" width="40" height="40">
						<path
							d="M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326z m1.8 562H232V136h302v216c0 23.2 18.8 42 42 42h216v494z"
							p-id="4955" fill="#0e932e" data-spm-anchor-id="a313x.search_index.0.i8.3d143a81L2zEZF"
							class="selected"></path>
						<path
							d="M429 481.2c-1.9-4.4-6.2-7.2-11-7.2h-35c-6.6 0-12 5.4-12 12v272c0 6.6 5.4 12 12 12h27.1c6.6 0 12-5.4 12-12V582.1l66.8 150.2c1.9 4.3 6.2 7.1 11 7.1H524c4.7 0 9-2.8 11-7.1l66.8-150.6V758c0 6.6 5.4 12 12 12H641c6.6 0 12-5.4 12-12V486c0-6.6-5.4-12-12-12h-34.7c-4.8 0-9.1 2.8-11 7.2l-83.1 191-83.2-191z"
							p-id="4956" fill="#0e932e" data-spm-anchor-id="a313x.search_index.0.i2.3d143a81L2zEZF"
							class="selected"></path>
					</svg></button>
				<!-- 云端保存 -->
				<button @click="saveDocument('manualsave')" v-tooltip="'保存'">
					<svg t="1693118573501" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="8970" width="40" height="40">
						<path fill="#01c6d9"
							d="M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840z"
							p-id="8971"></path>
						<path fill="#01c6d9"
							d="M512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"
							p-id="8972"></path>
					</svg>
				</button>
			</div>
			<!-- 字体、颜色、样式设置 -->
			<div class="font">
				<div class="font-top">
					<select class="font-select" v-model="selectedFontFamily" @change="changeFont"
						:style="{ 'font-family': `${selectedFontFamily}` }">
						<option v-for="fontOption in  fontOptions" :value="fontOption.value" :key="fontOption.value"
							:style="{ 'font-family': `${fontOption.label}` }">
							{{ fontOption.label }}
						</option>
					</select>
					<!-- 拾色器 -->
					<div class="color-input">
						<input type="color" @input="editor.chain().focus().setColor($event.target.value).run()"
							:value="editor.getAttributes('textStyle').color" />
					</div>
				</div>
				<div class="font-bottom">
					<!-- 加粗 B -->
					<button @click="editor.chain().focus().toggleBold().run()"
						:disabled="!editor.can().chain().focus().toggleBold().run()"
						:class="{ 'is-active': editor.isActive('bold') }" v-tooltip="'加粗'">
						<svg t="1693120857543" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="10125" width="20" height="20">
							<path
								d="M385.692278 918.576916 390.80771 919.307658C421.012953 920.769221 443.423035 921.499963 458.03843 921.499963 545.73119 921.499963 609.551045 905.545019 649.499963 873.63458 689.448881 841.724219 709.423104 790.449073 709.423104 719.807724 709.423104 655.986846 690.66689 608.365568 653.153831 576.942316 615.640852 545.519065 559.372209 529.807675 484.346171 529.807675 462.422961 529.807675 444.153935 530.051308 429.538462 530.538496 414.922988 531.025605 400.307751 531.756426 385.692278 532.730801L385.692278 918.576916ZM386.423099 445.769255C390.320522 446.256443 395.192241 446.621775 401.038494 446.865408 406.884667 447.108962 415.410176 447.23074 426.615414 447.23074 504.5645 447.23074 561.929295 431.51935 598.711532 400.096177 635.49377 368.672926 653.884652 319.590085 653.884652 252.846159 653.884652 194.384345 636.833477 151.025822 602.730732 122.76925 568.628066 94.512679 516.256768 80.38463 445.615419 80.38463 433.922993 80.38463 415.410412 81.358927 390.076889 83.307678L385.692278 83.307678 386.423099 445.769255ZM78.769231 0 528.192276 0C638.295434 0 721.115136 19.608812 776.653824 58.82691 832.192591 98.045086 859.961502 156.62781 859.961502 234.576896 859.961502 293.525898 841.936108 342.852372 805.884613 382.557657 769.833118 422.26302 716.731156 451.371717 646.576916 469.884613 732.320926 471.346176 799.063828 493.268992 846.80767 535.653849 894.551513 578.038705 918.423079 636.499653 918.423079 711.038425 918.423079 805.551734 886.026004 878.018954 821.23075 928.442289 756.435574 978.865625 663.141612 1004.076898 541.346186 1004.076898L78.769231 1004.076898 78.769231 931.000005 167.19234 922.961526 191.307697 899.576911 191.307697 101.57694 167.19234 80.38463 78.769231 73.076894 78.769231 0Z"
								fill="#000000" p-id="10126"></path>
						</svg>
					</button>
					<!-- 斜体 I -->
					<button @click="editor.chain().focus().toggleItalic().run()"
						:disabled="!editor.can().chain().focus().toggleItalic().run()"
						:class="{ 'is-active': editor.isActive('italic') }" v-tooltip="'斜体'">
						<svg t="1693059386616" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="2334" width="20" height="20">
							<path
								d="M760.198095 97.52381v73.142857h-127.804952l-189.464381 707.047619h146.627048v73.142857H243.809524v-73.142857h123.392l189.44-707.047619H414.47619V97.52381h345.721905z"
								p-id="2335"></path>
						</svg>
					</button>
					<!-- 删除线 -->
					<button @click="editor.chain().focus().toggleStrike().run()"
						:disabled="!editor.can().chain().focus().toggleStrike().run()"
						:class="{ 'is-active': editor.isActive('strike') }" v-tooltip="'删除线'">
						<svg t="1693059874309" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3819" width="20" height="20">
							<path
								d="M756.037818 539.624727c61.998545 40.634182 93.486545 96.977455 93.486546 169.053091 0 71.493818-30.487273 128.954182-90.274909 171.194182-57.437091 39.796364-133.632 59.764364-228.584728 59.764364-96.116364 0-172.334545-22.272-227.421091-65.629091-63.301818-50.408727-98.443636-126.650182-105.495272-227.421091h70.330181c8.215273 78.498909 35.165091 137.146182 82.059637 175.825454 42.193455 34.001455 102.004364 51.595636 179.362909 51.595637 73.844364 0 133.632-15.290182 179.339636-43.426909 44.544-29.253818 68.002909-69.12 68.002909-118.365091 0-57.437091-29.323636-101.981091-85.597091-133.632-18.338909-10.705455-50.641455-23.901091-97.256727-38.958546H221.090909a34.909091 34.909091 0 0 1 0-69.818182h145.105455c-22.853818-8.448-39.959273-15.965091-51.2-22.528-64.512-36.328727-96.162909-89.088-96.162909-157.044363 0-72.680727 29.323636-127.790545 90.298181-166.469818C363.008 87.412364 433.338182 69.818182 517.748364 69.818182c91.461818 0 164.119273 22.272 218.018909 66.816 55.109818 44.544 86.760727 110.173091 93.789091 196.957091h-71.517091c-9.355636-65.629091-33.978182-114.874182-73.844364-148.875637-39.866182-34.001455-96.116364-50.408727-168.797091-50.408727-68.002909 0-120.738909 11.729455-159.418182 35.141818-44.544 25.832727-65.629091 65.675636-65.629091 118.411637 0 46.917818 25.762909 83.223273 78.49891 111.36 24.669091 11.729455 78.545455 30.510545 160.628363 53.922909 20.014545 5.725091 38.772364 11.264 56.32 16.663272H826.181818a34.909091 34.909091 0 0 1 0 69.818182h-70.144z"
								p-id="3820"></path>
						</svg>
					</button>
					<!-- 下划线 -->
					<button @click="editor.chain().focus().toggleUnderline().run()"
						:disabled="!editor.can().chain().focus().toggleUnderline().run()"
						:class="{ 'is-active': editor.isActive('underline') }" v-tooltip="'下划线'">
						<svg t="1693059944194" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="4797" width="20" height="20">
							<path
								d="M360.423619 85.333333v73.142857H280.380952v319.561143c0 118.662095 99.718095 215.942095 224.889905 219.331048l6.729143 0.097524c128.292571 0 231.619048-98.645333 231.619048-219.428572V158.47619H658.285714v-73.142857h238.518857v73.142857H816.761905v319.561143c0 159.50019-132.705524 288.597333-297.155048 292.473905l-7.606857 0.097524c-167.936 0-304.761905-130.608762-304.761905-292.571429V158.47619H121.904762v-73.142857h238.518857zM170.666667 902.095238h685.007238v-73.142857H170.666667v73.142857z"
								p-id="4798"></path>
						</svg>
					</button>

				</div>
			</div>

			<!-- 编辑模式与查看历史 + 插入图片 -->
			<div class="edit-history">
				<!-- 编辑模式 -->
				<button @click="editable = !editable" :class="{ 'is-active': editable }" v-tooltip="'编辑/阅读'">
					<svg v-if="editable" t="1693118301113" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="8575" width="30" height="30">
						<path
							d="M257.7 752c2 0 4-0.2 6-0.5L431.9 722c2-0.4 3.9-1.3 5.3-2.8l423.9-423.9c3.9-3.9 3.9-10.2 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2c-1.9 11.1 1.5 21.9 9.4 29.8 6.6 6.4 14.9 9.9 23.8 9.9z m67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"
							p-id="8576"></path>
					</svg>
					<svg v-else t="1693118340836" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="8751" width="30" height="30">
						<path
							d="M928 161H699.2c-49.1 0-97.1 14.1-138.4 40.7L512 233l-48.8-31.3C422 175.1 373.9 161 324.8 161H96c-17.7 0-32 14.3-32 32v568c0 17.7 14.3 32 32 32h228.8c49.1 0 97.1 14.1 138.4 40.7l44.4 28.6c1.3 0.8 2.8 1.3 4.3 1.3s3-0.4 4.3-1.3l44.4-28.6C602 807.1 650.1 793 699.2 793H928c17.7 0 32-14.3 32-32V193c0-17.7-14.3-32-32-32zM324.8 721H136V233h188.8c35.4 0 69.8 10.1 99.5 29.2l48.8 31.3 6.9 4.5v462c-47.6-25.6-100.8-39-155.2-39z m563.2 0H699.2c-54.4 0-107.6 13.4-155.2 39V298l6.9-4.5 48.8-31.3c29.7-19.1 64.1-29.2 99.5-29.2H888v488z"
							p-id="8752"></path>
						<path
							d="M396.9 361H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0.1-4.1-3.1-7.5-7-7.5zM620 368.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0-4.1-3.2-7.5-7.1-7.5H627.1c-3.9 0-7.1 3.4-7.1 7.5zM396.9 501H211.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0.1-4.1-3.1-7.5-7-7.5zM812.9 501H627.1c-3.9 0-7.1 3.4-7.1 7.5v45c0 4.1 3.2 7.5 7.1 7.5h185.7c3.9 0 7.1-3.4 7.1-7.5v-45c0.1-4.1-3.1-7.5-7-7.5z"
							p-id="8753"></path>
					</svg>
				</button>
				<!--  -->
				<slot name="showHistoryButton"></slot>
				
				<!-- 目录 -->
				<button @click="handleContentPanel" :class="{ 'is-active': showingContent }" v-tooltip="'目录'">
					<svg t="1693619321960" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7323" width="30" height="30"><path d="M106.666667 192a21.333333 21.333333 0 1 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h85.333333a21.333333 21.333333 0 0 0 0-42.666666H106.666667z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h85.333333a21.333333 21.333333 0 0 0 0-42.666667H106.666667zM320 192a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z m0 298.666667a21.333333 21.333333 0 0 0 0 42.666666h597.333333a21.333333 21.333333 0 0 0 0-42.666666H320z m0 298.666666a21.333333 21.333333 0 0 0 0 42.666667h597.333333a21.333333 21.333333 0 0 0 0-42.666667H320z" p-id="7324"></path></svg>
				</button>
			</div>
			<!-- 各类格式调整 -->
			<div class="formats">
				<!-- 各类格式的上半部分 -->
				<div>
					<!-- 左对齐 -->
					<button @click="editor.chain().focus().setTextAlign('left').run()"
						:class="{ 'is-active': editor.isActive({ textAlign: 'left' }) }" v-tooltip="'左对齐'">
						<svg t="1693060081222" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="5924" width="20" height="20">
							<path
								d="M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"
								p-id="5925"></path>
						</svg>
					</button>
					<!-- 居中对齐 -->
					<button @click="editor.chain().focus().setTextAlign('center').run()"
						:class="{ 'is-active': editor.isActive({ textAlign: 'center' }) }" v-tooltip="'居中对齐'">
						<svg t="1693060101159" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="6079" width="20" height="20">
							<path
								d="M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"
								p-id="6080"></path>
						</svg>
					</button>
					<!-- 右对齐 -->
					<button @click="editor.chain().focus().setTextAlign('right').run()"
						:class="{ 'is-active': editor.isActive({ textAlign: 'right' }) }" v-tooltip="'右对齐'">
						<svg t="1693060134407" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="6234" width="20" height="20">
							<path
								d="M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"
								p-id="6235"></path>
						</svg>
					</button>
					<!-- 两端对齐 -->
					<button @click="editor.chain().focus().setTextAlign('justify').run()"
						:class="{ 'is-active': editor.isActive({ textAlign: 'justify' }) }" v-tooltip="'两端对齐'">
						<svg t="1693060195477" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="7241" width="20" height="20">
							<path d="M0 93.090909h1024v93.137455H0z" p-id="7242"></path>
							<path d="M0 332.334545h1024v93.09091H0z" p-id="7243"></path>
							<path d="M0 810.821818h1024v93.090909H0z" p-id="7244"></path>
							<path d="M0 571.578182h1024v93.090909H0z" p-id="7245"></path>
						</svg>
					</button>
					<!-- 有序列表 -->
					<button @click="editor.chain().focus().toggleOrderedList().run()"
						:class="{ 'is-active': editor.isActive('orderedList') }" v-tooltip="'有序列表'">
						<svg t="1693117280087" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="8575" width="30" height="30">
							<path
								d="M920 760H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM920 192H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM920 476H336c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM216 712H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h72.4v20.5h-35.7c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h35.7V838H100c-2.2 0-4 1.8-4 4v34c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4V716c0-2.2-1.8-4-4-4zM100 188h38v120c0 2.2 1.8 4 4 4h40c2.2 0 4-1.8 4-4V152c0-4.4-3.6-8-8-8h-78c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4zM216 428H100c-2.2 0-4 1.8-4 4v36c0 2.2 1.8 4 4 4h68.4l-70.3 77.7c-1.3 1.5-2.1 3.4-2.1 5.4V592c0 2.2 1.8 4 4 4h116c2.2 0 4-1.8 4-4v-36c0-2.2-1.8-4-4-4h-68.4l70.3-77.7c1.3-1.5 2.1-3.4 2.1-5.4V432c0-2.2-1.8-4-4-4z"
								p-id="8576"></path>
						</svg>
					</button>
					<!-- 无序列表 -->
					<button @click="editor.chain().focus().toggleBulletList().run()"
						:class="{ 'is-active': editor.isActive('bulletList') }" v-tooltip="'无序列表'">
						<svg t="1693117355867" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="8729" width="30" height="30">
							<path
								d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 476H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 760H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"
								p-id="8730"></path>
							<path d="M160 228m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" p-id="8731"></path>
							<path d="M160 512m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" p-id="8732"></path>
							<path d="M160 796m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" p-id="8733"></path>
						</svg>
					</button>
					<!-- 任务项 -->
					<button @click="editor.chain().focus().toggleTaskList().run()"
						:class="{ 'is-active': editor.isActive('taskList') }" v-tooltip="'创建任务项'">
						<!-- {{ editor.isActive('taskList') ? '清除' : '创建' }}任务项 -->
						<svg t="1693116828891" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="13009" width="20" height="20">
							<path
								d="M936.5 213.1H360.1c-12.7 0-23-10.3-23-23s10.3-23 23-23h576.5c12.7 0 23 10.3 23 23s-10.3 23-23.1 23zM163.1 270c-6.1 0-12-2.4-16.3-6.7L73.5 190c-9-9-9-23.5 0-32.5s23.5-9 32.5 0l57 57 109.7-109.7c9-9 23.5-9 32.5 0s9 23.5 0 32.5L179.3 263.2c-4.3 4.3-10.1 6.8-16.2 6.8zM360.1 535.3c-12.7 0-23-10.3-23-23s10.3-23 23-23l576.5-0.5c12.7 0 23 10.3 23 23s-10.3 23-23 23l-576.5 0.5zM163.1 592.4c-6.1 0-11.9-2.4-16.3-6.7l-73.3-73.2c-9-9-9-23.5 0-32.5s23.5-9 32.5 0l57.1 57 109.6-109.8c9-9 23.5-9 32.5 0s9 23.5 0 32.5l-125.8 126c-4.3 4.2-10.2 6.7-16.3 6.7z"
								p-id="13010"></path>
							<path
								d="M936.5 868H360.1c-12.7 0-23-10.3-23-23s10.3-23 23-23h576.5c12.7 0 23 10.3 23 23s-10.3 23-23.1 23zM163.1 924.9c-6.1 0-12-2.4-16.3-6.7l-73.3-73.3c-9-9-9-23.5 0-32.5s23.5-9 32.5 0l57 57 109.7-109.7c9-9 23.5-9 32.5 0s9 23.5 0 32.5L179.3 918.1c-4.3 4.4-10.1 6.8-16.2 6.8z"
								p-id="13011"></path>
						</svg>
					</button>
					<!-- 任务项右缩进 -->
					<button @click="editor.chain().focus().sinkListItem('taskItem').run()"
						:disabled="!editor.can().sinkListItem('taskItem')" v-tooltip="'降低任务项级别'">
						<svg t="1693117131151" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="16380" width="20" height="20">
							<path
								d="M960 981.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666666h853.333333a21.333333 21.333333 0 0 1 0 42.666666z m0-213.333333H490.666667a21.333333 21.333333 0 0 1 0-42.666667h469.333333a21.333333 21.333333 0 0 1 0 42.666667zM234.666667 640a21.266667 21.266667 0 0 0 15.086666-6.246667l85.333334-85.333333a21.333333 21.333333 0 0 0 0-30.173333l-85.333334-85.333334a21.333333 21.333333 0 0 0-30.173333 30.173334L268.493333 512H106.666667a21.333333 21.333333 0 0 0 0 42.666667h161.826666l-48.913333 48.913333A21.333333 21.333333 0 0 0 234.666667 640z m725.333333-85.333333H490.666667a21.333333 21.333333 0 0 1 0-42.666667h469.333333a21.333333 21.333333 0 0 1 0 42.666667z m0-213.333334H490.666667a21.333333 21.333333 0 0 1 0-42.666666h469.333333a21.333333 21.333333 0 0 1 0 42.666666z m0-213.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666667h853.333333a21.333333 21.333333 0 0 1 0 42.666667z"
								fill="#5C5C66" p-id="16381"></path>
						</svg>
					</button>
					<!-- 任务项左缩进 -->
					<button @click="editor.chain().focus().liftListItem('taskItem').run()"
						:disabled="!editor.can().liftListItem('taskItem')" v-tooltip="'提高任务项级别'">
						<svg t="1693117164039" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="16535" width="20" height="20">
							<path
								d="M960 981.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666666h853.333333a21.333333 21.333333 0 0 1 0 42.666666z m0-213.333333H490.666667a21.333333 21.333333 0 0 1 0-42.666667h469.333333a21.333333 21.333333 0 0 1 0 42.666667zM192 640a21.266667 21.266667 0 0 1-15.086667-6.246667l-85.333333-85.333333a21.333333 21.333333 0 0 1 0-30.173333l85.333333-85.333334a21.333333 21.333333 0 0 1 30.173334 30.173334L158.166667 512H320a21.333333 21.333333 0 0 1 0 42.666667H158.166667l48.92 48.913333A21.333333 21.333333 0 0 1 192 640z m768-85.333333H490.666667a21.333333 21.333333 0 0 1 0-42.666667h469.333333a21.333333 21.333333 0 0 1 0 42.666667z m0-213.333334H490.666667a21.333333 21.333333 0 0 1 0-42.666666h469.333333a21.333333 21.333333 0 0 1 0 42.666666z m0-213.333333H106.666667a21.333333 21.333333 0 0 1 0-42.666667h853.333333a21.333333 21.333333 0 0 1 0 42.666667z"
								fill="#5C5C66" p-id="16536"></path>
						</svg>
					</button>
					<!-- 切换上标 -->
					<button @click="editor.chain().focus().toggleSuperscript().run()"
						:class="{ 'is-active': editor.isActive('superscript') }" v-tooltip="'切换上标'">
						<svg t="1693626607568" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="4919" width="20" height="20">
							<path
								d="M217.856 218a16 16 0 0 1 12.608 6.15L402.06 443.78 573.655 224.15A16 16 0 0 1 586.263 218h82.39a8 8 0 0 1 6.305 12.925L455.358 512 676.52 795.075A8 8 0 0 1 670.217 808h-82.391a16 16 0 0 1-12.608-6.15L402.06 580.219 228.9 801.851A16 16 0 0 1 216.293 808h-82.39a8 8 0 0 1-6.305-12.925l221.163-283.076-219.6-281.074A8 8 0 0 1 135.465 218h82.391zM809.5 104c56.61 0 102.5 45.89 102.5 102.5 0 26.976-10.697 49.264-30.232 67.89l-0.807 0.766c-12.522 11.778-25.321 20.055-50.158 33.802l-11.76 6.469c-23.251 12.853-34.51 20.212-43.935 29.451-3.45 3.383-6.323 6.802-8.64 10.356l-0.237 0.366 137.791 0.378a8 8 0 0 1 7.978 8v36a8 8 0 0 1-8 8h-0.023l-189-0.535a8 8 0 0 1-7.977-8V381.5c0-29.405 11.17-53.621 31.704-73.753l0.86-0.838c13.776-13.316 28.004-22.493 55.676-37.74l8.57-4.706c22.672-12.5 33.27-19.313 42.074-27.706C855.644 227.45 860 218.375 860 206.5c0-27.89-22.61-50.5-50.5-50.5-27.611 0-50.047 22.16-50.493 49.665l-0.007 0.835v3.5a8 8 0 0 1-8 8h-36a8 8 0 0 1-8-8v-3.5c0-56.61 45.89-102.5 102.5-102.5z"
								p-id="4920"></path>
						</svg>
					</button>
				</div>
				<!-- 各类格式的下半部分 -->
				<div>
					<!-- 行内代码 -->
					<button @click="editor.chain().focus().toggleCode().run()"
						:disabled="!editor.can().chain().focus().toggleCode().run()"
						:class="{ 'is-active': editor.isActive('code') }" v-tooltip="'行内代码'">
						<svg t="1693060809541" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="14588" width="20" height="20">
							<path
								d="M320 320L256 256 0 512.64 256 768l64-64-192-192 192-192zM768 256l-64 64 192 192-192 192 64 64 256-255.36L768 256zM353.28 896h96l224-768h-96l-224 768z"
								p-id="14589"></path>
						</svg>
					</button>
					<!-- 代码块 -->
					<button ref="a" @click="editor.chain().focus().toggleCodeBlock().run()"
						:class="{ 'is-active': editor.isActive('codeBlock') }" v-tooltip="'代码块'">
						<svg t="1693060851190" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="14739" width="20" height="20">
							<path
								d="M213.344 192v213.344c0 32-66.144 64-85.344 64v85.344c19.2 0 85.344 32 85.344 64v213.344A105.6 105.6 0 0 0 320 938.688h85.344v-85.344H320c-12.8 0-21.344-8.544-21.344-21.344v-213.344c0-44.8-27.744-81.056-59.744-106.656 34.144-25.6 59.744-61.856 59.744-106.656V192c0-12.8 8.544-21.344 21.344-21.344h85.344V85.312H320a105.6 105.6 0 0 0-106.656 106.656zM810.656 405.344V192A105.6 105.6 0 0 0 704 85.344h-85.344v85.344H704c12.8 0 21.344 8.544 21.344 21.344v213.344c0 44.8 27.744 81.056 59.744 106.656-34.144 25.6-59.744 61.856-59.744 106.656v213.344c0 12.8-8.544 21.344-21.344 21.344h-85.344v85.344H704a105.6 105.6 0 0 0 106.656-106.656v-213.344c0-32 66.144-64 85.344-64v-85.344c-19.2 0-85.344-32-85.344-64z"
								p-id="14740"></path>
						</svg>
					</button>
					<!-- 块引用 -->
					<button @click="editor.chain().focus().toggleBlockquote().run()"
						:class="{ 'is-active': editor.isActive('blockquote') }" v-tooltip="'引用'">
						<svg t="1693117443196" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="9796" width="20" height="20">
							<path
								d="M235.710908 565.365418c3.442402-99.843986 20.061918-175.8521 49.92097-228.089835 29.827329-52.206012 76.305897-91.50097 139.435703-117.916597L349.324502 98.858542c-104.442724 47.073108-180.749644 116.493178-228.948389 208.29193C83.631234 376.007723 65.290517 487.336274 65.290517 641.107473l0 284.032962 332.234777 0L397.525294 565.365418 235.710908 565.365418zM769.351787 565.365418c3.442402-99.843986 20.061918-175.8521 49.92097-228.089835 29.827329-52.206012 76.305897-91.50097 139.435703-117.916597L882.965381 98.858542c-104.442724 47.073108-180.749644 116.493178-228.948389 208.29193-36.744879 68.857251-55.085596 180.185802-55.085596 333.957001l0 284.032962 332.234777 0L931.166173 565.365418 769.351787 565.365418z"
								p-id="9797"></path>
						</svg>
					</button>
					<!-- 水平分割线 -->
					<button @click="editor.chain().focus().setHorizontalRule().run()" v-tooltip="'水平分割线'">
						<svg t="1693117500657" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="10783" width="20" height="20">
							<path
								d="M908.8 399.36H112A97.28 97.28 0 0 1 14.72 302.08V97.92a32.64 32.64 0 0 1 64 0v204.16a32 32 0 0 0 32 32H908.8a32 32 0 0 0 32-32V97.92a32.64 32.64 0 0 1 64 0v204.16a97.92 97.92 0 0 1-96 97.28zM973.44 942.08a32.64 32.64 0 0 1-32.64-32.64V704a32 32 0 0 0-32-32H112a32 32 0 0 0-32 32v204.16a32.64 32.64 0 0 1-64 0V704a97.28 97.28 0 0 1 96-96H908.8a97.92 97.92 0 0 1 97.28 96v204.16a32.64 32.64 0 0 1-32.64 33.92zM864.64 538.88L155.52 533.76a33.28 33.28 0 0 1-32-33.28 32 32 0 0 1 32.64-32l708.48 5.12a33.92 33.92 0 0 1 32.64 33.28 32 32 0 0 1-32.64 32z"
								fill="#323333" p-id="10784"></path>
						</svg>
					</button>
					<!-- 强制回车 -->
					<button @click="editor.chain().focus().setHardBreak().run()" v-tooltip="'换行'">
						<svg t="1693117559112" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="12634" width="20" height="20">
							<path
								d="M793.3 191.8h-185c-17.7 0-32 14.3-32 32s14.3 32 32 32h184.9c4.6 0 8.4 3.8 8.4 8.4v303.1c0 4.6-3.8 8.4-8.4 8.4h-507L458 403.9c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L213.2 558.3c-13.1 13.1-20.3 30.5-20.3 49s7.2 35.9 20.3 49l201.4 201.4c6.2 6.2 14.4 9.4 22.6 9.4 8.2 0 16.4-3.1 22.6-9.4 12.5-12.5 12.5-32.8 0-45.3L287.2 639.7h506.1c39.9 0 72.4-32.5 72.4-72.4V264.2c0-39.9-32.5-72.4-72.4-72.4z"
								p-id="12635"></path>
						</svg>
					</button>
					<!-- 清除标记 -->
					<button @click="editor.chain().focus().unsetAllMarks().run(); editor.chain().focus().clearNodes().run()"
						v-tooltip="'清除样式'">
						<svg t="1693060935327" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="15726" width="20" height="20">
							<path
								d="M667.257905 139.873524l3.85219 3.632762 252.903619 254.537143a73.142857 73.142857 0 0 1 0 103.107047L604.501333 822.686476H828.952381v73.142857H266.532571l-172.129523-173.226666a73.142857 73.142857 0 0 1 0-103.131429L567.344762 143.530667a73.142857 73.142857 0 0 1 99.913143-3.632762zM227.181714 589.604571L146.285714 671.036952l150.674286 151.649524h163.303619l-233.081905-233.081905zM619.227429 195.047619L278.747429 537.721905l253.70819 253.70819 339.675429-341.820952L619.227429 195.047619z"
								p-id="15727"></path>
						</svg>
					</button>

					<!-- 暂不清楚清楚节点和标记的区别，将其 @click 一并放到上面 -->
					<!-- <button @click="editor.chain().focus().clearNodes().run()">
						清除节点
					</button> -->
					<!-- 撤销（undo） -->
					<button @click="editor.chain().focus().undo().run()"
						:disabled="!editor.can().chain().focus().undo().run()" v-tooltip="'撤销'">
						<svg t="1693117683006" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3472" width="20" height="20">
							<path
								d="M896.512 229.888C814.336 147.712 705.024 102.4 588.8 102.4s-225.536 45.2608-307.712 127.488S153.6 421.376 153.6 537.6v66.2016L43.7248 493.9264a25.6 25.6 0 0 0-36.1984 36.1984l153.6 153.6a25.4976 25.4976 0 0 0 36.2496 0l153.6-153.6a25.6 25.6 0 0 0-36.1984-36.1984l-109.8752 109.8752V537.6c0-211.7632 172.2368-384 384-384s384 172.2368 384 384-172.2368 384-384 384a25.6 25.6 0 0 0 0 51.2c116.224 0 225.536-45.2608 307.712-127.488s127.488-191.488 127.488-307.712c0-116.224-45.2608-225.536-127.488-307.712z"
								fill="" p-id="3473"></path>
						</svg>
					</button>
					<!-- 重做（redo） -->
					<button @click="editor.chain().focus().redo().run()"
						:disabled="!editor.can().chain().focus().redo().run()" v-tooltip="'重做'">
						<svg t="1693117714543" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3626" width="20" height="20">
							<path
								d="M127.5904 229.888C209.7664 147.712 319.0784 102.4 435.3024 102.4s225.536 45.2608 307.712 127.488S870.5024 421.376 870.5024 537.6v66.2016l109.8752-109.8752a25.6 25.6 0 0 1 36.1984 36.1984l-153.6 153.6a25.4976 25.4976 0 0 1-36.2496 0l-153.6-153.6a25.6 25.6 0 0 1 36.1984-36.1984l109.8752 109.8752V537.6c0-211.7632-172.2368-384-384-384s-384 172.2368-384 384 172.2368 384 384 384a25.6 25.6 0 0 1 0 51.2c-116.224 0-225.536-45.2608-307.712-127.488s-127.488-191.488-127.488-307.712c0-116.224 45.2608-225.536 127.488-307.712z"
								fill="" p-id="3627"></path>
						</svg>
					</button>
					<!-- 全屏/退出全屏 -->
					<button @click="switchFullScreen" v-tooltip="'全屏/退出全屏'">
						<svg v-if="!fullScreen" t="1693117914812" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3618" width="20" height="20">
							<path
								d="M149.333333 394.666667c17.066667 0 32-14.933333 32-32v-136.533334l187.733334 187.733334c6.4 6.4 14.933333 8.533333 23.466666 8.533333s17.066667-2.133333 23.466667-8.533333c12.8-12.8 12.8-32 0-44.8l-187.733333-187.733334H362.666667c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32H149.333333c-4.266667 0-8.533333 0-10.666666 2.133334-8.533333 4.266667-14.933333 10.666667-19.2 17.066666-2.133333 4.266667-2.133333 8.533333-2.133334 12.8v213.333334c0 17.066667 14.933333 32 32 32zM874.666667 629.333333c-17.066667 0-32 14.933333-32 32v136.533334L642.133333 597.333333c-12.8-12.8-32-12.8-44.8 0s-12.8 32 0 44.8l200.533334 200.533334H661.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h213.333334c4.266667 0 8.533333 0 10.666666-2.133334 8.533333-4.266667 14.933333-8.533333 17.066667-17.066666 2.133333-4.266667 2.133333-8.533333 2.133333-10.666667V661.333333c2.133333-17.066667-12.8-32-29.866666-32zM381.866667 595.2l-200.533334 200.533333V661.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v213.333334c0 4.266667 0 8.533333 2.133334 10.666666 4.266667 8.533333 8.533333 14.933333 17.066666 17.066667 4.266667 2.133333 8.533333 2.133333 10.666667 2.133333h213.333333c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-136.533333l200.533333-200.533333c12.8-12.8 12.8-32 0-44.8s-29.866667-10.666667-42.666666 0zM904.533333 138.666667c0-2.133333 0-2.133333 0 0-4.266667-8.533333-10.666667-14.933333-17.066666-17.066667-4.266667-2.133333-8.533333-2.133333-10.666667-2.133333H661.333333c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h136.533334l-187.733334 187.733333c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466667-8.533333l187.733333-187.733333V362.666667c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V149.333333c-2.133333-4.266667-2.133333-8.533333-4.266667-10.666666z"
								fill="#666666" p-id="3619"></path>
						</svg>
						<svg v-else t="1693117942330" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="3828" width="20" height="20">
							<path
								d="M313.6 358.4H177.066667c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h213.333333c4.266667 0 8.533333 0 10.666667-2.133333 8.533333-4.266667 14.933333-8.533333 17.066666-17.066667 2.133333-4.266667 2.133333-8.533333 2.133334-10.666667v-213.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v136.533333L172.8 125.866667c-12.8-12.8-32-12.8-44.8 0-12.8 12.8-12.8 32 0 44.8l185.6 187.733333zM695.466667 650.666667H832c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32H618.666667c-4.266667 0-8.533333 0-10.666667 2.133333-8.533333 4.266667-14.933333 8.533333-17.066667 17.066667-2.133333 4.266667-2.133333 8.533333-2.133333 10.666666v213.333334c0 17.066667 14.933333 32 32 32s32-14.933333 32-32v-136.533334l200.533333 200.533334c6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466667-8.533333c12.8-12.8 12.8-32 0-44.8l-204.8-198.4zM435.2 605.866667c-4.266667-8.533333-8.533333-14.933333-17.066667-17.066667-4.266667-2.133333-8.533333-2.133333-10.666666-2.133333H192c-17.066667 0-32 14.933333-32 32s14.933333 32 32 32h136.533333L128 851.2c-12.8 12.8-12.8 32 0 44.8 6.4 6.4 14.933333 8.533333 23.466667 8.533333s17.066667-2.133333 23.466666-8.533333l200.533334-200.533333V832c0 17.066667 14.933333 32 32 32s32-14.933333 32-32V618.666667c-2.133333-4.266667-2.133333-8.533333-4.266667-12.8zM603.733333 403.2c4.266667 8.533333 8.533333 14.933333 17.066667 17.066667 4.266667 2.133333 8.533333 2.133333 10.666667 2.133333h213.333333c17.066667 0 32-14.933333 32-32s-14.933333-32-32-32h-136.533333L896 170.666667c12.8-12.8 12.8-32 0-44.8-12.8-12.8-32-12.8-44.8 0l-187.733333 187.733333V177.066667c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v213.333333c2.133333 4.266667 2.133333 8.533333 4.266666 12.8z"
								fill="#666666" p-id="3829"></path>
						</svg>
					</button>
					<!-- 切换下标 -->
					<button @click="editor.chain().focus().toggleSubscript().run()"
						:class="{ 'is-active': editor.isActive('subscript') }" v-tooltip="'切换下标'">
						<svg t="1693626713828" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="6018" width="20" height="20">
							<path
								d="M809.5 608c56.61 0 102.5 45.89 102.5 102.5 0 26.976-10.697 49.264-30.232 67.89l-0.807 0.766c-12.522 11.778-25.321 20.055-50.158 33.802l-11.76 6.469c-23.251 12.853-34.51 20.212-43.935 29.451-3.45 3.383-6.323 6.802-8.64 10.356l-0.237 0.366 137.791 0.378a8 8 0 0 1 7.978 8v36a8 8 0 0 1-8 8h-0.023l-189-0.535a8 8 0 0 1-7.977-8V885.5c0-29.405 11.17-53.621 31.704-73.753l0.86-0.838c13.776-13.316 28.004-22.493 55.676-37.74l8.57-4.706c22.672-12.5 33.27-19.313 42.074-27.706C855.644 731.45 860 722.375 860 710.5c0-27.89-22.61-50.5-50.5-50.5-27.611 0-50.047 22.16-50.493 49.665l-0.007 0.835v3.5a8 8 0 0 1-8 8h-36a8 8 0 0 1-8-8v-3.5c0-56.61 45.89-102.5 102.5-102.5zM217.856 218a16 16 0 0 1 12.608 6.15L402.06 443.78 573.655 224.15A16 16 0 0 1 586.263 218h82.39a8 8 0 0 1 6.305 12.925L455.358 512 676.52 795.075A8 8 0 0 1 670.217 808h-82.391a16 16 0 0 1-12.608-6.15L402.06 580.219 228.9 801.851A16 16 0 0 1 216.293 808h-82.39a8 8 0 0 1-6.305-12.925l221.163-283.076-219.6-281.074A8 8 0 0 1 135.465 218h82.391z"
								p-id="6019"></path>
						</svg>
					</button>
				</div>
			</div>
			<!-- 各级标题 -->
			<div class="headers">
				<!-- 插入图片 -->
				<input ref="imgInput" style="display:none;" type="file" accept="image" @input="insertImage">
				<button @click="$refs.imgInput.click" v-tooltip="'插入图片'"><svg t="1693404668430" class="icon" viewBox="0 0 1024 1024"
						version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3460" width="30" height="30">
						<path
							d="M938.666667 553.92V768c0 64.8-52.533333 117.333333-117.333334 117.333333H202.666667c-64.8 0-117.333333-52.533333-117.333334-117.333333V256c0-64.8 52.533333-117.333333 117.333334-117.333333h618.666666c64.8 0 117.333333 52.533333 117.333334 117.333333v297.92z m-64-74.624V256a53.333333 53.333333 0 0 0-53.333334-53.333333H202.666667a53.333333 53.333333 0 0 0-53.333334 53.333333v344.48A290.090667 290.090667 0 0 1 192 597.333333a286.88 286.88 0 0 1 183.296 65.845334C427.029333 528.384 556.906667 437.333333 704 437.333333c65.706667 0 126.997333 16.778667 170.666667 41.962667z m0 82.24c-5.333333-8.32-21.130667-21.653333-43.648-32.917333C796.768 511.488 753.045333 501.333333 704 501.333333c-121.770667 0-229.130667 76.266667-270.432 188.693334-2.730667 7.445333-7.402667 20.32-13.994667 38.581333-7.68 21.301333-34.453333 28.106667-51.370666 13.056-16.437333-14.634667-28.554667-25.066667-36.138667-31.146667A222.890667 222.890667 0 0 0 192 661.333333c-14.464 0-28.725333 1.365333-42.666667 4.053334V768a53.333333 53.333333 0 0 0 53.333334 53.333333h618.666666a53.333333 53.333333 0 0 0 53.333334-53.333333V561.525333zM320 480a96 96 0 1 1 0-192 96 96 0 0 1 0 192z m0-64a32 32 0 1 0 0-64 32 32 0 0 0 0 64z"
							p-id="3461"></path>
					</svg></button>

				<!-- 插入表格 -->
				<button @click="showingTableMenu = !showingTableMenu" :class="{'is-active': showingTableMenu}">
					<svg t="1693622248227" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2356" width="30" height="30"><path d="M960 591.424V368.96c0-0.288 0.16-0.512 0.16-0.768S960 367.68 960 367.424V192a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v175.424c0 0.288-0.16 0.512-0.16 0.768s0.16 0.48 0.16 0.768v222.464c0 0.288-0.16 0.512-0.16 0.768s0.16 0.48 0.16 0.768V864a32 32 0 0 0 32 32h832a32 32 0 0 0 32-32v-271.04c0-0.288 0.16-0.512 0.16-0.768S960 591.68 960 591.424z m-560-31.232v-160H608v160h-208z m208 64V832h-208v-207.808H608z m-480-224h208v160H128v-160z m544 0h224v160h-224v-160zM896 224v112.192H128V224h768zM128 624.192h208V832H128v-207.808zM672 832v-207.808h224V832h-224z" p-id="2357"></path></svg>
					<ul class="table-dropdown" v-show="showingTableMenu">
						<li>
							<button @click="editor.chain().focus().insertTable({ rows: 3, cols: 3, withHeaderRow: true }).run()">
								插入表格
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().addColumnBefore().run()">
								向前插入列
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().addColumnAfter().run()">
								向后插入列
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().deleteColumn().run()">
								删除列
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().addRowBefore().run()">
								向前插入行
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().addRowAfter().run()">
								向后插入行
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().deleteRow().run()">
								删除行
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().splitCell().run()">
								分裂单元格
							</button>
						</li>
						<li>
							<button 
								@click="editor.chain().focus().toggleHeaderColumn().run()"
								:class="{ 'is-active': editor.isActive('headerColumn') }"
							>
								设置表头列
							</button>
						</li>
						<li>
							<button 
								@click="editor.chain().focus().toggleHeaderRow().run()"
								:class="{ 'is-active': editor.isActive('headerRow') }"
							>
								设置表头行
							</button>
						</li>
						<li>
							<button 
								@click="editor.chain().focus().toggleHeaderCell().run()"
								:class="{ 'is-active': editor.isActive('headerCell') }"
							>
								设置表头单元格
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().fixTables().run()">
								修复表格
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().goToNextCell().run()">
								下一单元格
							</button>
						</li>
						<li>
							<button @click="editor.chain().focus().goToPreviousCell().run()">
								上一单元格
							</button>
						</li>
					</ul>
				</button>
				<div>
					<!-- 合并单元格 -->
					<button class="merge-cell" @click="editor.chain().focus().mergeCells().run()" v-tooltip="'合并单元格'">
						<svg t="1693623767474" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3300" width="20" height="20"><path d="M401.408 522.24h-196.608v-40.96h196.608l-47.104-47.104c-8.192-8.192-8.192-20.48 0-28.672 8.192-8.192 20.48-8.192 28.672 0l96.256 96.256-96.256 96.256c-8.192 8.192-20.48 8.192-28.672 0-8.192-8.192-8.192-20.48 0-28.672l47.104-47.104z m221.184-40.96h196.608v40.96h-196.608l47.104 47.104c8.192 8.192 8.192 20.48 0 28.672-8.192 8.192-20.48 8.192-28.672 0l-96.256-96.256 96.256-96.256c8.192-8.192 20.48-8.192 28.672 0 8.192 8.192 8.192 20.48 0 28.672l-47.104 47.104z m-202.752 286.72h40.96v61.44c0 34.816-26.624 61.44-61.44 61.44h-225.28c-34.816 0-61.44-26.624-61.44-61.44v-634.88c0-34.816 26.624-61.44 61.44-61.44h225.28c34.816 0 61.44 26.624 61.44 61.44v61.44h-40.96v-61.44c0-10.24-8.192-20.48-20.48-20.48h-225.28c-10.24 0-20.48 8.192-20.48 20.48v634.88c0 12.288 8.192 20.48 20.48 20.48h225.28c10.24 0 20.48-8.192 20.48-20.48v-61.44z m143.36 0h40.96v61.44c0 12.288 8.192 20.48 20.48 20.48h225.28c10.24 0 20.48-10.24 20.48-20.48v-634.88c0-12.288-8.192-20.48-20.48-20.48h-225.28c-10.24 0-20.48 10.24-20.48 20.48v63.488h-40.96V194.56c0-34.816 26.624-61.44 61.44-61.44h225.28c34.816 0 61.44 26.624 61.44 61.44v634.88c0 34.816-26.624 61.44-61.44 61.44h-225.28c-34.816 0-61.44-26.624-61.44-61.44v-61.44z" p-id="3301"></path></svg>
					</button>
					<!-- 删除表格 -->
					<button class="delete-table" @click="editor.chain().focus().deleteTable().run()" v-tooltip="'删除表格'">
						<svg t="1693623992953" class="icon" viewBox="0 0 1142 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4506" width="20" height="20"><path d="M664.812308 1024H57.895385A57.895385 57.895385 0 0 1 0 966.498462V57.501538A57.895385 57.895385 0 0 1 57.895385 0h1026.363077A57.895385 57.895385 0 0 1 1142.153846 57.501538V551.384615a19.692308 19.692308 0 0 1-39.384615 0V57.501538a18.510769 18.510769 0 0 0-18.510769-18.116923H57.895385a18.510769 18.510769 0 0 0-18.51077 18.116923v908.996924a18.510769 18.510769 0 0 0 18.51077 18.116923h606.916923a19.692308 19.692308 0 0 1 0 39.384615z" fill="#2c2c2c" p-id="4507"></path><path d="M39.384615 393.846154h1063.384616v39.384615H39.384615zM39.384615 590.769231h630.153847v39.384615H39.384615zM39.384615 787.692308h590.769231v39.384615H39.384615zM39.384615 196.923077h1063.384616v39.384615H39.384615z" fill="#2c2c2c" p-id="4508"></path><path d="M315.076923 196.923077v787.692308H275.692308V196.923077zM590.769231 196.923077v787.692308h-39.384616V196.923077zM866.461538 196.923077v315.076923h-39.384615V196.923077z" fill="#2c2c2c" p-id="4509"></path><path d="M39.384615 39.384615h1063.384616v157.538462H39.384615z" fill="#2c2c2c" p-id="4510"></path><path d="M984.615385 886.153846a18.510769 18.510769 0 0 1-13.784616-5.907692l-118.153846-118.153846a19.298462 19.298462 0 0 1 27.569231-27.569231l118.153846 118.153846a18.904615 18.904615 0 0 1 0 27.569231 18.510769 18.510769 0 0 1-13.784615 5.907692z" fill="#2c2c2c" p-id="4511"></path><path d="M866.461538 886.153846a18.510769 18.510769 0 0 1-13.784615-5.907692 18.904615 18.904615 0 0 1 0-27.569231l118.153846-118.153846a19.298462 19.298462 0 0 1 27.569231 27.569231l-118.153846 118.153846a18.510769 18.510769 0 0 1-13.784616 5.907692z" fill="#2c2c2c" p-id="4512"></path><path d="M925.538462 1024a216.615385 216.615385 0 1 1 216.615384-216.615385 217.009231 217.009231 0 0 1-216.615384 216.615385z m0-393.846154a177.230769 177.230769 0 1 0 177.230769 177.230769 177.624615 177.624615 0 0 0-177.230769-177.230769z" fill="#2c2c2c" p-id="4513"></path></svg>
					</button>
				</div>
				



				<!-- h1 -->
				<button @click="editor.chain().focus().toggleHeading({ level: 1 }).run()"
					:class="{ 'is-active': editor.isActive('heading', { level: 1 }) }" v-tooltip="'一级标题'">
					<svg t="1693061041243" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1321" width="50" height="50">
						<path
							d="M584.9 445.3V142.6h86.5v735h-86.5V531.7H152.5v345.9H66.1v-735h86.5v302.6l432.3 0.1zM843.7 877.6v-0.3h-79.8V826h79.8V558.6c-22.5 23.4-49.9 40.4-79.8 49.3v-59.1c17.2-5.2 33.8-12.9 49.1-23 16.2-10.6 30.9-23.7 43.9-38.9h39.9V826h61.7v51.3h-61.7v0.3h-53.1z"
							p-id="1322"></path>
					</svg>
				</button>
				<!-- h2 -->
				<button @click="editor.chain().focus().toggleHeading({ level: 2 }).run()"
					:class="{ 'is-active': editor.isActive('heading', { level: 2 }) }" v-tooltip="'二级标题'">
					<svg t="1693061118323" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="1479" width="35" height="35">
						<path
							d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276z m935.282 448H680c0.479-41.591 10.533-77.923 30.163-108.997 19.63-31.074 46.44-58.084 80.434-81.031 16.279-11.952 33.275-23.544 50.99-34.779 17.714-11.234 33.993-23.305 48.835-36.213 14.842-12.907 27.05-26.89 36.626-41.95 9.576-15.058 14.603-32.388 15.081-51.988 0-9.083-1.077-18.764-3.231-29.042-2.155-10.278-6.344-19.84-12.568-28.683-6.224-8.845-14.842-16.254-25.854-22.23-11.012-5.976-25.375-8.964-43.09-8.964-16.278 0-29.803 3.227-40.576 9.68-10.772 6.455-19.39 15.299-25.854 26.533-6.463 11.235-11.251 24.5-14.363 39.798-3.112 15.298-4.908 31.791-5.386 49.48h-81.87c0-27.728 3.71-53.423 11.13-77.087 7.422-23.664 18.553-44.101 33.395-61.311 14.842-17.21 32.916-30.715 54.222-40.516 21.305-9.8 46.081-14.7 74.33-14.7 30.641 0 56.255 5.02 76.843 15.059 20.587 10.04 37.224 22.707 49.912 38.005 12.688 15.298 21.665 31.91 26.931 49.838 5.267 17.927 7.9 35.018 7.9 51.272 0 20.078-3.112 38.244-9.336 54.498-6.224 16.254-14.603 31.193-25.136 44.818-10.533 13.625-22.502 26.174-35.908 37.647a538.302 538.302 0 0 0-41.653 32.27 1122.27 1122.27 0 0 0-43.09 28.683c-14.364 9.083-27.65 18.166-39.858 27.249-12.209 9.083-22.862 18.525-31.958 28.325-9.097 9.8-15.321 20.198-18.673 31.193h244.894V896z"
							p-id="1480"></path>
					</svg>
				</button>
				<div class="h3-h6">
					<!-- h3 -->
					<button @click="editor.chain().focus().toggleHeading({ level: 3 }).run()"
						:class="{ 'is-active': editor.isActive('heading', { level: 3 }) }" v-tooltip="'三级标题'">
						<svg t="1693061135842" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="1633" width="20" height="20">
							<path
								d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276zM815.551 597.802c13.128 0.47 26.257-0.469 39.385-2.813 13.129-2.344 24.85-6.447 35.165-12.308 10.316-5.86 18.638-13.948 24.968-24.263 6.33-10.315 9.494-22.975 9.494-37.978 0-21.1-7.15-37.978-21.45-50.638-14.301-12.66-32.704-18.989-55.21-18.989-14.066 0-26.257 2.813-36.572 8.44-10.315 5.626-18.872 13.245-25.67 22.857-6.799 9.612-11.84 20.395-15.121 32.352-3.283 11.956-4.69 24.263-4.22 36.923h-80.177c0.938-23.913 5.392-46.066 13.363-66.462 7.97-20.396 18.872-38.095 32.703-53.099 13.832-15.004 30.594-26.725 50.287-35.165C802.188 388.22 824.459 384 849.31 384c19.223 0 38.095 2.813 56.616 8.44 18.52 5.626 35.165 13.831 49.934 24.615 14.77 10.784 26.609 24.498 35.517 41.143 8.909 16.645 13.363 35.75 13.363 57.318 0 24.85-5.626 46.535-16.88 65.055-11.252 18.52-28.835 32-52.747 40.44v1.407c28.132 5.626 50.052 19.575 65.759 41.846 15.707 22.27 23.56 49.348 23.56 81.23 0 23.444-4.688 44.425-14.065 62.946-9.378 18.52-22.037 34.227-37.979 47.12-15.942 12.894-34.462 22.858-55.561 29.89-21.1 7.034-43.37 10.55-66.814 10.55-28.601 0-53.568-4.103-74.902-12.308-21.334-8.205-39.15-19.81-53.451-34.813-14.3-15.004-25.202-33.055-32.704-54.154-7.502-21.099-11.487-44.542-11.956-70.33h80.177c-0.938 30.008 6.447 54.975 22.154 74.902s39.268 29.89 70.682 29.89c26.726 0 49.114-7.62 67.166-22.857 18.051-15.239 27.077-36.923 27.077-65.055 0-19.224-3.751-34.462-11.253-45.715-7.502-11.252-17.348-19.81-29.539-25.67-12.19-5.86-25.905-9.494-41.143-10.901-15.239-1.407-30.828-1.875-46.77-1.407v-59.78z"
								p-id="1634"></path>
						</svg>
					</button>
					<!-- h4 -->
					<button @click="editor.chain().focus().toggleHeading({ level: 4 }).run()"
						:class="{ 'is-active': editor.isActive('heading', { level: 4 }) }" v-tooltip="'四级标题'">
						<svg t="1693061157475" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="1787" width="20" height="20">
							<path
								d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276z m936.246 331.56h-63.298v116.748h-75.957V779.56H674v-79.472L884.991 404h75.957v312.264h63.298v63.296zM735.89 716.264h149.1V499.648h-1.406L735.89 716.264z"
								p-id="1788"></path>
						</svg>
					</button>
					<!-- h5 -->
					<button @click="editor.chain().focus().toggleHeading({ level: 5 }).run()"
						:class="{ 'is-active': editor.isActive('heading', { level: 5 }) }" v-tooltip="'五级标题'">
						<svg t="1693116665930" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="12701" width="20" height="20">
							<path
								d="M742.89 394h254.597v71.736H802.672l-25.32 125.187 1.407 1.407c10.784-12.19 24.499-21.45 41.144-27.78 16.645-6.33 33.172-9.495 49.583-9.495 24.381 0 46.183 4.102 65.407 12.308 19.224 8.205 35.4 19.692 48.528 34.461 13.129 14.77 23.092 32.235 29.89 52.396 6.8 20.161 10.198 41.963 10.198 65.406 0 19.693-3.164 39.971-9.494 60.836-6.33 20.864-16.41 39.853-30.242 56.967-13.832 17.113-31.532 31.179-53.1 42.197-21.568 11.019-47.355 16.528-77.363 16.528-23.913 0-46.067-3.165-66.463-9.495-20.396-6.33-38.33-15.824-53.802-28.483-15.473-12.66-27.78-28.25-36.924-46.77-9.143-18.52-14.183-40.204-15.121-65.054h80.177c2.344 26.725 11.487 47.238 27.429 61.538 15.941 14.3 37.04 21.45 63.297 21.45 16.88 0 31.18-2.812 42.902-8.439 11.721-5.626 21.216-13.362 28.484-23.209 7.267-9.846 12.425-21.333 15.472-34.461 3.048-13.129 4.572-27.194 4.572-42.198 0-13.597-1.876-26.608-5.627-39.033-3.75-12.425-9.377-23.326-16.879-32.703-7.502-9.378-17.231-16.88-29.187-22.506-11.956-5.626-25.905-8.44-41.847-8.44-16.88 0-32.703 3.165-47.473 9.495-14.77 6.33-25.436 18.169-32 35.517h-80.177L742.891 394zM88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276z"
								p-id="12702"></path>
						</svg>
					</button>
					<!-- h6 -->
					<button @click="editor.chain().focus().toggleHeading({ level: 6 }).run()"
						:class="{ 'is-active': editor.isActive('heading', { level: 6 }) }" v-tooltip="'六级标题'">
						<svg t="1693116723112" class="icon" viewBox="0 0 1024 1024" version="1.1"
							xmlns="http://www.w3.org/2000/svg" p-id="12855" width="20" height="20">
							<path
								d="M88 448h400V172c0-24.3 19.7-44 44-44s44 19.7 44 44v680c0 24.3-19.7 44-44 44s-44-19.7-44-44V536H88v316c0 24.3-19.7 44-44 44S0 876.3 0 852V172c0-24.3 19.7-44 44-44s44 19.7 44 44v276z m846.736 70.33c-1.875-20.162-9.02-36.454-21.438-48.88-12.417-12.424-29.169-18.637-50.255-18.637-14.526 0-27.06 2.696-37.603 8.088-10.544 5.392-19.446 12.542-26.71 21.45-7.262 8.91-13.12 19.107-17.571 30.594-4.452 11.487-8.083 23.56-10.895 36.22-2.811 12.66-4.803 25.201-5.974 37.626a4794.582 4794.582 0 0 1-3.163 34.813l1.406 1.407c10.777-19.692 25.654-34.344 44.632-43.956 18.978-9.612 39.478-14.418 61.501-14.418 24.366 0 46.155 4.22 65.367 12.66 19.212 8.44 35.495 20.044 48.85 34.813 13.354 14.77 23.545 32.234 30.574 52.395 7.029 20.162 10.543 41.964 10.543 65.407 0 23.912-3.866 46.066-11.597 66.462-7.732 20.395-18.86 38.212-33.387 53.45-14.526 15.238-31.863 27.077-52.012 35.517C906.855 891.78 884.598 896 860.232 896c-36.081 0-65.719-6.681-88.913-20.044-23.195-13.363-41.47-31.648-54.824-54.857-13.355-23.209-22.609-50.403-27.763-81.583-5.155-31.18-7.732-64.82-7.732-100.923 0-29.538 3.163-59.31 9.489-89.318 6.326-30.008 16.751-57.319 31.277-81.934 14.526-24.616 33.62-44.66 57.284-60.132C802.714 391.736 831.882 384 866.557 384c19.68 0 38.19 3.282 55.527 9.846 17.338 6.564 32.683 15.707 46.038 27.429 13.355 11.721 24.249 25.787 32.683 42.198 8.435 16.41 13.12 34.695 14.058 54.857h-80.127zM857.42 829.187c14.526 0 27.178-2.93 37.955-8.791 10.777-5.861 19.797-13.48 27.06-22.858 7.263-9.377 12.652-20.278 16.166-32.703 3.515-12.425 5.272-25.201 5.272-38.33 0-13.128-1.757-25.787-5.272-37.978-3.514-12.19-8.903-22.857-16.166-32-7.263-9.142-16.283-16.527-27.06-22.153-10.777-5.627-23.429-8.44-37.955-8.44s-27.295 2.696-38.306 8.088c-11.012 5.392-20.266 12.66-27.764 21.802-7.497 9.143-13.12 19.81-16.868 32-3.75 12.19-5.623 25.084-5.623 38.681 0 13.598 1.874 26.491 5.623 38.682 3.748 12.19 9.371 23.091 16.868 32.703 7.498 9.612 16.752 17.23 27.764 22.857 11.011 5.627 23.78 8.44 38.306 8.44z"
								p-id="12856"></path>
						</svg>
					</button>
				</div>
			</div>

			<div class="temp-container">
				<!-- 普通段落 -->
				<button style="display: none" @click="editor.chain().focus().setParagraph().run()"
					:class="{ 'is-active': editor.isActive('paragraph') }">
					<svg t="1693118237112" class="icon" viewBox="0 0 1024 1024" version="1.1"
						xmlns="http://www.w3.org/2000/svg" p-id="10079" width="20" height="20">
						<path
							d="M960 10.581333H308.394667a297.685333 297.685333 0 1 0 0 595.370667h98.901333a10.666667 10.666667 0 0 1 10.666667 10.666667V960a53.333333 53.333333 0 0 0 106.666666 0V128a10.666667 10.666667 0 0 1 10.666667-10.666667h157.098667a10.666667 10.666667 0 0 1 10.666666 10.666667v832a53.333333 53.333333 0 0 0 106.666667 0V128a10.624 10.624 0 0 1 10.666667-10.666667H960a53.333333 53.333333 0 0 0 0-106.666666zM418.133333 488.618667a10.666667 10.666667 0 0 1-10.666666 10.666666H308.394667a191.018667 191.018667 0 1 1 0-382.037333h98.901333A10.666667 10.666667 0 0 1 418.133333 128z"
							p-id="10080"></path>
					</svg>
				</button>
			</div>
		</div>
		<!-- 表格设置 -->
		<div class="table">
			
			<!-- nuclear marine diving -->
		</div>
		<!-- <div @click="provider.destroy">点击下线</div> -->
		<div class="document-title">{{ docName }}</div>
		<node-view-wrapper class="toc" id="content">
			<ul class="toc__list">
				<li class="toc__item" :class="`toc__item--${heading.level}`" v-for="(heading, index) in headings"
					:key="index">
					<a @click="jumpToHeader(`${heading.id}`)">
						<span>{{ heading.text }}</span>
					</a>
				</li>
			</ul>
		</node-view-wrapper>
		<div class="flex">
			<editor-content :editor="editor" id="document-content" />
			<slot v-if="showHistoryVersion" name="version"></slot>
		</div>

		<div id="hidden-area" class="flex"></div>
		<div class="document-words">
			{{ editor.storage.characterCount.words() }} 个单词,
			{{ editor.storage.characterCount.characters() }} / {{ docLimit }} 个字符 &nbsp;
			{{ selectUniqueUser(editor.storage.collaborationCursor.users) }}人正在编辑该文档
			<span :style="{
				'font-size': 'inherit',
				'opacity': lastSaveTime === undefined ? '0' : '1',
				'transition': 'all linear 1s'
			}">&nbsp;&nbsp;
				<div v-if="lastSaveTime !== undefined"
					:class="saveCompleted === false ? 'connecting-dot' : 'connected-dot'">
				</div>
				{{ lastSaveTime !== undefined ? (saveCompleted === false ? '正在自动保存...' : '上次自动保存于' + lastSaveTime) : '' }}
			</span>
		</div>
		<div class="connection-status">
			<div :class="provider.status === 'connecting' ? 'connecting-dot' : 'connected-dot'"></div>
			{{ provider.status === 'connecting' ? '正在连接到服务器......' : '已连接到服务器' }}
		</div>
	</div>
</template>

<script>
import StarterKit from '@tiptap/starter-kit'
import CharactorCount from '@tiptap/extension-character-count'
import Image from '@tiptap/extension-image'
import Table from '@tiptap/extension-table'
import TableCell from '@tiptap/extension-table-cell'
import TableHeader from '@tiptap/extension-table-header'
import TableRow from '@tiptap/extension-table-row'
import Underline from '@tiptap/extension-underline'
import FontFamily from '@tiptap/extension-font-family'
import Focus from '@tiptap/extension-focus'
import Typography from '@tiptap/extension-typography'//实时渲染markdown
import Subscript from '@tiptap/extension-subscript'
import Superscript from '@tiptap/extension-superscript'
import Highlight from '@tiptap/extension-highlight'//文本高亮
import Placeholder from '@tiptap/extension-placeholder'
import { Color } from '@tiptap/extension-color'
import Dropcursor from '@tiptap/extension-dropcursor'//拖拽器
import TaskItem from '@tiptap/extension-task-item'
import TaskList from '@tiptap/extension-task-list'
import TextStyle from '@tiptap/extension-text-style'
import TextAlign from '@tiptap/extension-text-align'
import ContentTable from './Content.js'
import { nodeViewProps, NodeViewWrapper } from '@tiptap/vue-3'//目录
import { lowlight } from 'lowlight'//代码高亮
import CodeBlockLowLight from '@tiptap/extension-code-block-lowlight'//代码高亮
import { Editor, EditorContent, BubbleMenu, FloatingMenu } from '@tiptap/vue-3'
//协作重要插件
import * as Y from 'yjs'
import { HocuspocusProvider } from '@hocuspocus/provider'
import Collaboration from '@tiptap/extension-collaboration'
import CollaborationCursor from '@tiptap/extension-collaboration-cursor'
//将文档下载到本地
import exportWord from 'js-export-word'
import html2canvas from 'html2canvas'
import JsPDF from 'jspdf'
import Turndown from 'turndown'

// @
import Mention from '@tiptap/extension-mention'
import { VueRenderer } from '@tiptap/vue-3'
import tippy from 'tippy.js'
import MentionList from './MentionList.vue'
import Suggestion from '@tiptap/suggestion'

// color picker
import { NColorPicker } from 'naive-ui'

export default {
	name: 'TextEditor',
	components: {
		EditorContent,
		BubbleMenu,
		FloatingMenu,
		NColorPicker,
		NodeViewWrapper,
	},
	props: {
		showHistoryVersion: {
			type: Boolean,
			default: false,
		},
		docId: {
			type: String,
			default: '1'
		},
		docName: {
			type: String,
			default: 'temp'
		},
		docContent: {
			type: String,
		},
		isReadOnly: {
			type: Boolean
		}
	},
	emits: ['update:docContent', 'updateVersion'],
	data() {
		return {
			userAvatar: '/src/assets/avatar.jpeg',
			members: [],//当前团队用户(排除自己)，游客模式无效
			docLimit: 100000,
			autoSavePeriod: 10000,
			autoSaver: undefined,
			contentUpdater: undefined,
			lastSaveTime: undefined,//上次自动保存的时间
			saveCompleted: undefined,//是否处于自动保存状态
			isBusy: 1,//处理完某些交互事项前用户不能操作
			busyTip: '加载中',
			showAtPosition: false,//初次连接前为false
			editable: false,
			fullScreen: false,
			editor: undefined,
			selectedFontFamily: 'sans-serif',
			selectedFontSize: '',
			provider: undefined,
			headings: [],//目录的标题
			fontOptions: [
				{ value: 'consolas', label: 'consolas' },
				{ value: 'monospace', label: 'monospace' },
				{ value: 'cascadia code', label: 'cascadia code' },
				{ value: 'Arial', label: 'Arial' },
				{ value: 'Courier', label: 'Courier' },
				{ value: 'Courier new', label: 'Courier new' },
				{ value: 'PingFang SC', label: 'PingFang SC' },
				{ value: 'sans-serif', label: 'sans-serif' },
				{ value: 'Inter', label: 'Inter' },
				{ value: 'Comic Sans MS, Comic Sans', label: 'Comic Sans' },
				{ value: 'serif', label: 'serif' },
				{ value: 'monospace', label: 'monospace' },
				{ value: 'cursive', label: 'cursive' },
				{ value: 'Times New Roman', label: 'Times New Roman' }
			],
			showingContent: false, // 默认不展示目录
			showingTableMenu: false, // 表格下拉菜单
		}
	},

	methods: {
		jumpToHeader(id) {
			const target = document.getElementById(id)
			console.log(target)
			if (target) {
				const y = target.getBoundingClientRect().top
				const scrollTop = window.pageYOffset || document.documentElement.scrollTop
				// console.log('y=', y)
				window.scrollTo(0, y + scrollTop - 100)
			}
		},
		// 处理目录展示与否
		handleContentPanel() {
			this.showingContent = !this.showingContent
			const panel = document.getElementById('content')
			if (this.showingContent) {
				panel.classList.add('panel-slide-out')
				setTimeout(() => {
					panel.style.transform = 'translateX(0)'
					panel.style.opacity = '1'
					panel.classList.remove('panel-slide-out')
				}, 500);
			} else {
				panel.classList.add('panel-slide-in')
				setTimeout(() => {
					panel.style.transform = 'translateX(-340px)'
					panel.style.opacity = '0'
					panel.classList.remove('panel-slide-in')
				}, 500);
			}
		},
		clearColorPickerText() {
			const div = document.getElementsByClassName('n-color-picker-trigger__value')
			if (div) {
				div[0].innerHTML = ''
			}
		},
		//协作人数有时候总会出错，因此需要查重
		selectUniqueUser(users) {
			let dic = {}
			let cnt = 0
			for (const obj of users) {
				// 如果字典中不存在该 id，则将对象添加到结果数组中，并将该 id 添加到字典中
				if (!dic[obj.id]) {
					dic[obj.id] = true;
					cnt++
				}
			}
			return cnt
		},
		//为协作光标获取随机颜色
		getRandomColor() {
			const letters = '0123456789ABCDEF';
			let color = '#';

			for (let i = 0; i < 6; i++) {
				color += letters[Math.floor(Math.random() * 16)];
			}
			return color;
		},
		//根据亮度匹配协作光标的字体颜色
		getFontColor(background) {
			// 将背景颜色转换为RGB格式
			const r = parseInt(background.substr(1, 2), 16);
			const g = parseInt(background.substr(3, 2), 16);
			const b = parseInt(background.substr(5, 2), 16);

			// 计算亮度（根据公式 Y = 0.299*R + 0.587*G + 0.114*B）
			const brightness = (0.299 * r + 0.587 * g + 0.114 * b) / 255;

			// 根据亮度选择字体颜色
			const fontColor = brightness > 0.5 ? '#444' : '#eee';

			return fontColor;
		},
		//获取当前时间
		getCurrentDateTime() {
			const now = new Date();

			const year = now.getFullYear();
			const month = String(now.getMonth() + 1).padStart(2, '0'); // 月份从 0 开始，需要加 1，并且要保证两位数字
			const day = String(now.getDate()).padStart(2, '0'); // 日期需要保证两位数字
			const hours = String(now.getHours()).padStart(2, '0');
			const minutes = String(now.getMinutes()).padStart(2, '0');
			const seconds = String(now.getSeconds()).padStart(2, '0');

			const dateTimeString = `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`;

			return dateTimeString;
		},
		//更改字体
		changeFont() {
			this.editor.chain().focus().setFontFamily(this.selectedFontFamily || 'unset').run()
		},
		//插入图片
		insertImage(event) {
			if (this.editable) {
				this.isBusy++
				const reader = new FileReader()
				reader.onload = (event) => {
					const imageData = event.target.result
					this.editor.chain().focus().setImage({ src: imageData }).run()
					this.isBusy--
				}
				reader.readAsDataURL(event.target.files[0])
			}
		},
		//更新目录
		handleContentUpdate() {
			const headings = []
			const transaction = this.editor.state.tr
			this.editor.state.doc.descendants((node, pos) => {
				if (node.type.name === 'heading') {
					const id = `heading-${headings.length + 1}`

					if (node.attrs.id !== id) {
						transaction.setNodeMarkup(pos, undefined, {
							...node.attrs,
							id,
						})
					}

					headings.push({
						level: node.attrs.level,
						text: node.textContent,
						id,
					})
				}
			})
			transaction.setMeta('addToHistory', false)
			transaction.setMeta('preventUpdate', true)

			this.editor.view.dispatch(transaction)
			this.headings = headings
		},
		//跳转到@位置
		jumpToAt() {
			//游客模式禁用跳转
			if (this.$cookies.isKey('user_id') == false)
				return
			if (this.$route.query.atId !== undefined && (this.showAtPosition === false))//这里需要从路由获取是否跳转的信息
			{
				this.showAtPosition = true
				let atId = this.$route.query.atId
				console.log(atId)
				//寻找@标签
				// const nodes = this.editor.getJSON().content;
				// // 递归处理内部节点
				// function findMentionNodes(nodes, result = [], id = undefined) {
				// 	for (const node of nodes) {
				// 		if (node.type === 'mention' && node.attrs.id) {
				// 			result.push(node);
				// 		}
				// 		if (node.content) {
				// 			findMentionNodes(node.content, result);
				// 		}
				// 	}
				// 	return result;
				// }
				// const targetMentions = findMentionNodes(nodes)
				//如果有节点
				// if (targetMentions.length !== 0) {
				const targetMention = document.querySelector(`[data-id="${atId}"]`)
				console.log(targetMention)
				console.log('atid' + atId)
				if (targetMention !== undefined) {
					console.log('findAtTag,id=' + targetMention)
					targetMention.scrollIntoView({ behavior: 'smooth', block: 'start' })
					targetMention.classList.add('at-highlight')
					setTimeout(() => {
						targetMention.classList.remove('at-highlight')
					}, 1000)
				}
				else {
					alert('@消息已被删除')
				}
			}
			// else {
			// 	alert('@消息已被删除')
			// }
			// }
		},
		exportAsPDF() {
			this.busyTip = '正在导出为PDF'
			this.isBusy++
			let original = document.querySelector('#document-content')
			let page = original.cloneNode(true)//需要对原样式进行一些修改，因此深拷贝
			//修改样式和显示内容
			page.querySelectorAll('.ProseMirror').forEach(element => {
				element.style.backgroundColor = 'white';
			});
			page.querySelectorAll('.collaboration-cursor__caret, .collaboration-cursor__label').forEach(element => {
				element.style.display = 'none';
			});
			original.style.display = 'none'//隐藏显示
			document.querySelector('#hidden-area').appendChild(page)
			const docName = this.docName
			let abs = 0
			let innerWidth = document.documentElement.clientWidth || document.body.clientWidth // 获得当前可视窗口的宽度（不包含滚动条）
			let outerWidth = window.innerWidth // 获得当前窗口的宽度（包含滚动条）
			if (outerWidth > innerWidth) {
				abs = (outerWidth - innerWidth) / 2    // 获得滚动条宽度的一半
			}
			html2canvas(page, {
				dpi: 300,
				useCORS: true  //允许canvas画布内 可以跨域请求外部链接图片, 允许跨域请求。
			}).then((canvas) => {
				let pdf = new JsPDF('p', 'mm', 'a4')    //A4纸，纵向
				let ctx = canvas.getContext('2d')
				let a4w = 190, a4h = 277    //A4大小，210mm x 297mm，四边各保留10mm的边距，显示区域190x277
				let imgHeight = Math.floor(a4h * canvas.width / a4w)    //按A4显示比例换算一页图像的像素高度
				let renderedHeight = 0

				while (renderedHeight < canvas.height) {
					let page = document.createElement("canvas")
					page.width = canvas.width
					page.height = Math.min(imgHeight, canvas.height - renderedHeight)//可能内容不足一页
					//用getImageData剪裁指定区域，并画到前面创建的canvas对象中
					page.getContext('2d').putImageData(ctx.getImageData(0, renderedHeight, canvas.width, Math.min(imgHeight, canvas.height - renderedHeight)), 0, 0)
					pdf.addImage(page.toDataURL('image/jpeg', 1.0), 'JPEG', 10, 10, a4w, Math.min(a4h, a4w * page.height / page.width))    //添加图像到页面，保留10mm边距
					renderedHeight += imgHeight
					if (renderedHeight < canvas.height)
						pdf.addPage()//如果后面还有内容，添加一个空页
				}
				pdf.save(docName)
			}).then(() => {
				original.style.display = 'block'//恢复显示
				document.querySelector('#hidden-area').removeChild(page)
				alert('成功保存为PDF')
				this.isBusy--
				this.busyTip = '加载中'
			})
		},
		exportAsWord() {
			this.busyTip = '正在导出为Word'
			this.isBusy++
			exportWord(document.querySelector('#document-content'), {
				addStyle: true,
				fileName: this.docName,
				// toImg: [],
				// success() {}
			})
			this.isBusy--
			this.busyTip = '加载中'
		},
		exportAsMarkdown() {
			this.busyTip = '正在导出为Markdown'
			this.isBusy++
			const turndown = new Turndown()
			let markdownContent = turndown.turndown(this.editor.getHTML())
			//创建blob文件
			const blob = new Blob([markdownContent], { type: 'text/plain' })
			const url = URL.createObjectURL(blob)
			const link = document.createElement('a')
			link.style.display = 'none'
			link.download = `${this.docName}.md`
			link.href = url
			link.click()
			//清除url和链接
			URL.revokeObjectURL(url)
			link.remove()
			this.isBusy--
			this.busyTip = '加载中'
		},
		switchFullScreen() {
			if (document.fullscreenElement === null) {
				document.getElementById('editor-wrapper').requestFullscreen()
				console.log('进入全屏')
				this.fullScreen = true
			} else {
				document.exitFullscreen()
				console.log('退出全屏')
				this.fullScreen = false
			}
		},
		saveDocument(mode) {
			const reader = new FileReader()
			const blob = new Blob([this.editor.getHTML()], { type: 'text/html' })
			const formData = new FormData()
			formData.append('source', blob, `${this.docName}.html`)
			// reader.onload = (event) => {
			// 	const dataUrl = event.target.result
			// 	formData.append('source', dataUrl)
			// formData.append('source', dataUrl.split('base64,')[1])
			if (mode === 'manualsave') {
				this.busyTip = '保存中'
				this.isBusy++
				this.$http.post(`/api/projects/file/${this.docId}/store/`, formData, {
					headers: {
						'Content-type': 'multipart/form-data'
					}
				}).then(() => {
					console.log('保存成功')
					this.isBusy--
					this.busyTip = '加载中'
					this.$emit('updateVersion')
				})
			} else {
				this.saveCompleted = false
				this.$http.post(`/api/projects/file/${this.docId}/autostore/`, formData, {
					headers: {
						'Content-type': 'multipart/form-data'
					}
				}).then(() => {
					this.lastSaveTime = this.getCurrentDateTime()//更新自动保存
					this.saveCompleted = true
					this.$emit('updateVersion')
				})
			}
			// }
			// reader.readAsText(blob)
		},
	},
	watch: {
		editable() {
			this.editor.setEditable(this.editable)
		},
		docContent() {
			this.editor.commands.setContent(this.docContent)
		},
		selectedFontFamily(newValue) {
			if (newValue === '') {
				this.selectedFontFamily = 'sans-serif'
			}
		}
	},
	mounted() {
		//清除一些残渣
		if (this.provider !== undefined) { this.provider.destroy() }
		if (this.editor !== undefined) { this.editor.destroy() }
		if (this.autoSaver !== undefined) { clearInterval(this.autoSaver) }
		if (this.contentUpdater !== undefined) { clearInterval(this.contentUpdater) }

		const yDOC = new Y.Doc()//协作文档载体
		this.provider = new HocuspocusProvider({//用户端
			url: 'ws://43.138.14.231:1234',
			//文档的标识对应一个 yDoc 属性
			name: String(this.docId),
			document: yDOC,
			onSynced: () => {
				setTimeout(() => {//异步执行，需要等到users加载完全
					this.editor.commands.setContent(this.docContent)
					this.isBusy--//释放最初的isBusy
					this.jumpToAt()//跳转到@位置
				}, 100)
			},
			onDisconnect: () => {
				this.isBusy++
			},
			forceSyncInterval: 100,
		})
		//加载保存时间最近的文件,然后初始化编辑器
		//查询团队成员,然后初始化编辑器,游客模式下不可用
		if (this.$cookies.isKey('user_id') == true) {
			this.$http.get(`/api/teams/${this.$cookies.get('teamId')}/`).then((response) => {
				let identityMap = {
					'leader': '团队创建者',
					'admin': '团队管理员',
					'member': '团队成员'
				}
				this.members = response.data.members
					.filter(e => this.$cookies.get('user_id') != e.user.id)//排除自己
					.map(element => {
						return {
							docId: this.docId,
							id: element.user.id,
							username: element.user.username,
							identity: identityMap[element.identity]
						}
					})
			})
		}
		this.editor = new Editor({
			extensions: [
				ContentTable,
				Mention.configure({
					HTMLAttributes: {
						class: 'mention',
					},
					// 只有登录状态才能@别人
					suggestion: this.$cookies.isKey('user_id') ?
						{
							items: () => { return this.members },
							//修改默认command
							command: ({ editor, range, props }) => {
								// increase range.to by one when the next node is of type "text"
								// and starts with a space character
								const nodeAfter = editor.view.state.selection.$to.nodeAfter
								const overrideSpace = nodeAfter?.text?.startsWith(' ')

								if (overrideSpace) {
									range.to += 1
								}
								editor
									.chain()
									.focus()
									.insertContentAt(range, [
										{
											type: 'mention',
											attrs: {
												...props,
												id: props.id,
												label: props.name
											}
										},
										{
											type: 'text',
											text: ' ',
										},
									])
									.run()
								window.getSelection()?.collapseToEnd()
								this.saveDocument('autosave')//每次@自动保存
							},
							render: () => {
								let component
								let popup
								return {
									onStart: props => {
										component = new VueRenderer(MentionList, {
											props,
											editor: props.editor,
										})

										if (!props.clientRect()) {
											return
										}
										popup = tippy('body', {
											getReferenceClientRect: props.clientRect,
											appendTo: () => document.body,
											content: component.element,
											showOnCreate: true,
											interactive: true,
											trigger: 'manual',
											placement: 'bottom-start',
										})
									},

									onUpdate(props) {
										component.updateProps(props)
										if (!props.clientRect()) {
											return
										}
										popup[0].setProps({
											getReferenceClientRect: props.clientRect,
										})
									},

									onKeyDown(props) {
										if (props.event.key === 'Escape') {
											popup[0].hide()
											return true
										}
										return component.ref?.onKeyDown(props)
									},

									onExit() {
										popup[0].destroy()
										component.destroy()
									},
								}
							}
						} : {}
				}),
				StarterKit.configure({
					history: false//使用collaboration的history
				}),
				CharactorCount.configure({
					limit: this.docLimit
				}),
				Collaboration.configure({
					document: yDOC
				}),
				CollaborationCursor.configure({
					provider: this.provider,
					user: {
						name: this.$cookies.isKey('user_id') ? this.$cookies.get('username') : '游客',
						id: this.$cookies.isKey('user_id') ? this.$cookies.get('user_id') : undefined,//过滤重复的用户
						color: this.getRandomColor(),
						avatar: this.userAvatar
					}
				}),
				Dropcursor.configure({
					color: "#c71d23"
				}),
				Focus.configure({
					className: 'has-focus',
					mode: 'shallowest'
				}),
				Subscript.configure({
					HTMLAttributes: {
						class: 'subscript'
					}
				}),
				Superscript.configure({
					HTMLAttributes: {
						class: 'superscript'
					}
				}),
				Table.configure({
					resizable: true,
					// cellMinWidth: 25,
					allowTableNodeSelection: true
				}),
				TableRow,
				TableHeader,
				TableCell,
				Image.configure({
					inline: true,
					allowBase64: true
				}),
				Typography,
				Underline,
				Color,
				FontFamily,
				TaskList,
				TaskItem.configure({
					nested: true,
				}),
				TextStyle,
				TextAlign.configure({
					types: ['heading', 'paragraph'],
				}),
				CodeBlockLowLight.configure({
					lowlight,
				}),
				Placeholder.configure(
					{
						placeholder: ({ node }) => {
							return '从这里开始编写文档 支持Markdown快捷键'
						}
					}
				),
				Highlight.configure({
					multicolor: true
				})
			],
			content: '',
			editable: this.editable,
			onSelectionUpdate: () => {
				let selected = window.getSelection()
				if (selected.rangeCount !== 0) {
					let range = selected.getRangeAt(0)
					let node = range.commonAncestorContainer
					if (node.nodeType != 1) {
						node = node.parentNode
					}
					this.selectedFontSize = window.getComputedStyle(node).getPropertyValue('font-size')
					this.selectedFontFamily = window.getComputedStyle(node).getPropertyValue('font-family')
				}
			},
		})
		//设置自动保存,记得Unmounted清除
		this.autoSaver = setInterval(() => {
			if (this) {
				this.saveDocument('autosave')
			}
		}, 30000)
		//修改协作光标的文字颜色
		document.querySelectorAll('.ProseMirror .collaboration-cursor__label').forEach(elm => {
			elm.style.color = this.getFontColor(elm.style.backgroundColor)
		})
		//设置目录 因为需要放在编辑器外面所以只能这样
		this.contentUpdater = setInterval(() => {
			this.handleContentUpdate()
		}, 500)

	},
	beforeUnmount() {
		this.editor.destroy()
		this.provider.destroy()
		clearInterval(this.contentUpdater)
		clearInterval(this.autoSaver)//important 不然重复保存
	}
}

</script>

<style>
::selection {
	background: lightgray;
}


/* 最外层盒子 */
#editor-wrapper {
	position: relative;
	/* margin: 0 10px; */
	background: rgb(240, 240, 240);
	width: 100%;
	/* width: 80%; */
	/* margin: 0 auto; */
}


/* 颜色选择按钮样式 */
.color-input {
	/* padding: 3px 5px; */
	/* margin: 3px 5px; */
	display: inline-block;
	width: 23px;
	display: flex;
	justify-content: center;
	align-items: center;
	cursor: pointer;
	/* height: 30px; */
	/* border-radius: 30px;
	overflow: hidden; */
}


/* 气泡菜单样式 */
.editor-bubble-menu {
	border-radius: 5px;
	padding: 5px;
	background: rgb(240, 240, 240);
	box-shadow: 3px 3px 10px grey;
	width: fit-content;
	white-space: nowrap;
	display: flex;
	align-items: center;
}

.editor-bubble-menu>div>div {
	display: flex;
	align-items: center;
}

.editor-bubble-menu>div>div:nth-child(2) {
	margin-top: 5px;
}

.editor-bubble-menu>div>div:nth-child(2)>button {
	background: 0;
	margin-right: 7px;
}

.editor-bubble-menu>div>div:nth-child(2)>button:hover {
	transform: scale(1.2);
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(1):hover {
	box-shadow: 1px 1px #ffc078;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(2):hover {
	box-shadow: 1px 1px #8ce99a;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(3):hover {
	box-shadow: 1px 1px #74c0fc;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(4):hover {
	box-shadow: 1px 1px #b197fc;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(5):hover {
	box-shadow: 1px 1px #cd4444;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(6):hover {
	box-shadow: 1px 1px #ee9999;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(7):hover {
	box-shadow: 1px 1px #616161;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(8):hover {
	box-shadow: 1px 1px #dddddd;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(9):hover {
	box-shadow: 1px 1px black;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(1).is-active {
	border: 1px solid #ffc078;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(2).is-active {
	border: 1px solid #8ce99a;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(3).is-active {
	border: 1px solid #74c0fc;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(4).is-active {
	border: 1px solid #b197fc;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(5).is-active {
	border: 1px solid #cd4444;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(6).is-active {
	border: 1px solid #ee9999;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(7).is-active {
	border: 1px solid #616161;
}

.editor-bubble-menu>div>div:nth-child(2)>button:nth-child(8).is-active {
	border: 1px solid #dddddd;
}

/* .editor-bubble-menu>div>div:nth-child(2)>button:nth-child(9).is-active {
	border: 1px solid  #fa8aa7;
} */




.editor-floating-menu {
	border-radius: 5px;
	padding: 5px;
	background: rgb(240, 240, 240);
	box-shadow: 3px 3px 10px grey;
	width: fit-content;
	white-space: nowrap;
}

.editor-floating-menu button {
	display: inline-flex;
	justify-content: center;
	align-items: center;
	/* background: 0 !important; */
	background: transparent;
	transition: 0.5s cubic-bezier(0.075, 0.82, 0.165, 1) !important;
	margin: 3px;
	padding: 3px;
	border-radius: 5px;
	transition: all linear 0.2s;
	cursor: pointer;
}

.editor-floating-menu button:hover {
	transform: scale(1.2);
	box-shadow: 1px 1px 3px grey;
}

.editor-floating-menu button.is-active {
	background: rgb(199, 29, 35);
	fill: white;
}

/* 气泡菜单按钮样式 */
.editor-bubble-menu button {
	width: 20px;
	height: 20px;
	/* padding: 3px 5px; */
	margin: 3px 5px;
	border-radius: 2px;
	background: #ddd;
	color: #616161;
	transition: all linear 0.2s;
	cursor: pointer;
	display: inline-flex;
	justify-content: center;
	align-items: center;
}

.editor-bubble-menu select {
	margin-left: 10px;
	height: 25px;
	border: 0;
	border-radius: 5px;
	color: rgba(199, 29, 35, 1);
}

.editor-bubble-menu select:focus-visible {
	outline: 2px solid rgb(199, 29, 35);
}


/* 工具栏按钮样式 */
.editor-bar {
	position: sticky;
	top: 0;
	height: 100px;
	z-index: 10;
	background: rgb(245, 245, 245);
	border-bottom: 1px solid lightgrey;
	display: flex;
	/* flex-wrap: wrap; */
}

.editor-bar .saves {
	display: flex;
	align-items: center;
}

.editor-bar .saves button {
	margin-right: 5px;
	padding: 0;
	height: 70px;
}

.editor-bar .font {
	width: 200px;
	flex: none;
	display: flex;
	flex-wrap: wrap;
	align-content: center;
}

.editor-bar .font-top {
	display: flex;
	width: 100%;
	justify-content: space-evenly;
	align-items: center;
	margin-bottom: 5px;
}

.editor-bar .font-bottom {
	display: flex;
	width: 100%;
	justify-content: space-evenly;
}

.color-input input {
	border-radius: 5px;
	cursor: pointer;
}

.editor-bar .font-bottom button {
	width: 35px;
	height: 35px;
	display: flex;
	justify-content: center;
	align-items: center;
	margin: 0;
}

.editor-bar button {
	border-radius: 3px;
	background: #ddd;
	color: #616161;
	padding: 5px 10px;
	margin: 5px 10px;
	transition: all linear 0.2s;
	cursor: pointer;
}

.editor-bar button:hover {
	transform: scale(1.05);
}

.editor-bubble-menu button:hover {
	transform: scale(1.05);
}

/* 加粗等按钮为激活状态时的样式 */
.editor-bar button.is-active {
	background: rgb(199, 29, 35);
	color: #ddd;
	fill: #ddd;
	font-weight: 700;
}


.editor-bar button[disabled="true"] {
	opacity: 0.5;
}

/* 文档字数和单词统计 */
.document-words {
	/* width: 100%; */
	/* background: rgb(220,220,220); */
	background: rgba(255, 255, 255, 0.8);
	border-radius: 10px;
	position: fixed;
	bottom: 0;
	left: 10px;
	padding: 3px 0;
	padding-left: 10px;
	padding-right: 10px;
	font-size: 13px;
	box-shadow: -1px -1px 5px grey;
}

/* 连接状态显示 */
/* 未连接状态 */
.connecting-dot {
	vertical-align: middle;
	display: inline-block;
	width: 9px;
	margin: 0 5px 1px 0;
	aspect-ratio: 1;
	border-radius: 10px;
	background: transparent;
	border: #616161 2px dotted;
	animation: rotate infinite 1s linear;
}

/* 已连接状态 */
.connected-dot {
	vertical-align: middle;
	margin: 0 5px 1px 0;
	display: inline-block;
	width: 9px;
	aspect-ratio: 1;
	border-radius: 9px;
	background: #15c601;
	border: transparent 2px solid;
	animation: shining infinite 5s linear;
}

.connection-status {
	vertical-align: middle;
	background: rgba(255, 255, 255, 0.8);
	display: inline-block;
	border-radius: 10px;
	position: fixed;
	bottom: 0;
	right: 10px;
	padding: 3px 0;
	padding-left: 10px;
	padding-right: 10px;
	font-size: 13px;
	box-shadow: 1px 1px 5px grey;
}

.document-characters {
	display: inline-block;
	margin-left: 10px;
	padding-left: 15px;
	border-left: 1px solid black;
	font-size: 13px;
	/* position: sticky;
	bottom: 0;
	left: 0; */
}

/* 文档标题 */
.document-title {
	margin-top: 20px;
	text-align: center;
	font-size: 40px;
	font-weight: 700;
}

/* 编辑器内容区 */
#document-content {
	/* padding: 20px; */
	overflow: auto;
	width: 700px;
}


.ProseMirror {
	min-height: 700px;
	/* width: 60%; */
	min-width: 700px;
	caret-color: rgba(199, 29, 35, 1);
	font-size: 20px;
	/* margin: 0 auto; */
	padding: 100px;
	border: 1px solid lightgrey;
	box-sizing: border-box;
	box-shadow: 0 0 5px grey;
	background: white;
	/* line-height: 2; */
	border-radius: 5px;
	margin-top: 25px;
	/* background: #ccc; */
	white-space: normal;
	/* transition: all cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s; */
}

.ProseMirror:focus-visible {
	outline: 0;
}

/* placeholder样式 */
.ProseMirror p.is-editor-empty:first-child::before {
	font-weight: 700;
	color: #777 !important
}

/* 加粗样式 */
.ProseMirror strong {
	font-weight: 700;
}

/* 倾斜样式 */
.ProseMirror em {
	font-style: italic;
}

/* 划掉样式 */
.ProseMirror s {
	text-decoration: line-through;
}

/* 下划线样式 */
.ProseMirror u {
	text-decoration: underline;
}


/* 一坨任务项样式 */
.ProseMirror ul[data-type="taskList"] {
	list-style: none;
	padding: 0;
}

.ProseMirror ul[data-type="taskList"] p {
	margin: 0;
}

.ProseMirror ul[data-type="taskList"] li {
	display: flex;
}

.ProseMirror ul[data-type="taskList"] li>label {
	flex: 0 0 auto;
	margin-right: 0.5rem;
	user-select: none;
}

.ProseMirror ul[data-type="taskList"] li div {
	flex: 1 1 auto;
}

.ProseMirror ul[data-type="taskList"] li ul li,
.ProseMirror ul[data-type="taskList"] li ol li {
	display: list-item;
}

.ProseMirror ul[data-type="taskList"] li ul[data-type="taskList"]>li {
	display: flex;
}

/* 各级标题 */
.ProseMirror h1,
.ProseMirror h1 * {
	font-size: 45px;
}

.ProseMirror h2,
.ProseMirror h2 * {
	font-size: 37px;
}

.ProseMirror h3,
.ProseMirror h3 * {
	font-size: 30px;
}

.ProseMirror h4,
.ProseMirror h4 * {
	font-size: 25px;
}

.ProseMirror h5,
.ProseMirror h5 * {
	font-size: 20px;
}

.ProseMirror h6,
.ProseMirror h6 * {
	font-size: 18px;
}

.ProseMirror h1,
.ProseMirror h2,
.ProseMirror h3,
.ProseMirror h4,
.ProseMirror h5,
.ProseMirror h6 {
	font-weight: 700;
}

/* placeholder样式 */
.tiptap p.is-editor-empty:first-child::before {
	color: #adb5bd;
	content: attr(data-placeholder);
	float: left;
	height: 0;
	pointer-events: none;
}

.ProseMirror .selectedCell {
	background: rgb(199, 29, 35, 0.5);
}

/* 块引用 */
.ProseMirror blockquote {
	/* display: inline-block; */
	margin-top: 5px;
	margin-bottom: 5px;
	padding-left: 1rem;
	border-left: 3px solid #888;
}

/* 代码碎片文字样式 */
.ProseMirror code {
	font-size: 0.9em;
	padding: 0.25em;
	margin: 0 0.25em;
	border-radius: 0.25em;
	background: #ccc;
	color: #616161;
	font-family: monoca, cascadia code, monospace;
	box-decoration-break: clone;
}

.ProseMirror pre {
	background: #0D0D0D;
	color: #FFF;
	font-family: 'JetBrainsMono', monospace;
	padding: 0.75rem 1rem;
	border-radius: 0.5rem;
}


.ProseMirror pre code {
	color: inherit;
	padding: 0;
	background: none;
	font-size: 0.9em;
}

/* 代码块样式 */
.ProseMirror .hljs-comment,
.ProseMirror .hljs-quote {
	color: #616161;
}

.ProseMirror .hljs-variable,
.ProseMirror .hljs-template-variable,
.ProseMirror .hljs-attribute,
.ProseMirror .hljs-tag,
.ProseMirror .hljs-name,
.ProseMirror .hljs-regexp,
.ProseMirror .hljs-link,
.ProseMirror .hljs-name,
.ProseMirror .hljs-selector-id,
.ProseMirror .hljs-selector-class {
	color: #F98181;
}

.ProseMirror .hljs-number,
.ProseMirror .hljs-meta,
.ProseMirror .hljs-built_in,
.ProseMirror .hljs-builtin-name,
.ProseMirror .hljs-literal,
.ProseMirror .hljs-type,
.ProseMirror .hljs-params {
	color: #FBBC88;
}

.ProseMirror .hljs-string,
.ProseMirror .hljs-symbol,
.ProseMirror hljs-bullet {
	color: #B9F18D;
}

.ProseMirror .hljs-title,
.ProseMirror .hljs-section {
	color: #FAF594;
}

.ProseMirror .hljs-keyword,
.ProseMirror .hljs-selector-tag {
	color: #70CFF8;
}

.ProseMirror .hljs-emphasis {
	font-style: italic;
}

.ProseMirror .hljs-strong {
	font-weight: 700;
}

.ProseMirror .subscript,
.ProseMirror .superscript {
	font-size: 0.6em;
}

.ProseMirror img {
	max-width: 100%;
	height: auto;
}

.ProseMirror blockquote {
	padding-left: 1rem;
	border-left: 2px solid rgba(#0D0D0D, 0.1);
}

.ProseMirror hr {
	border: 2px solid rgba(#555);
	margin: 2rem 0;
}

/* @样式 */
.mention {
	display: inline-block;
	background: rgb(199, 29, 35);
	color: white;
	font-weight: 700;
	line-height: 1.5;
	margin: 0.5rem;
	padding: 0 7px;
	border-radius: 10px;
	vertical-align: middle;
	transition: all cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s;
}

.at-highlight {
	box-shadow: rgb(199, 29, 35) 0 0 5px;
	color: rgb(199, 29, 35);
	background: white;
	transform: scale(1.5);
}



/* 协作光标样式 */
.ProseMirror .collaboration-cursor__caret {
	border-left: 1px solid #0D0D0D;
	border-right: 1px solid #0D0D0D;
	margin-left: -1px;
	margin-right: -1px;
	pointer-events: none;
	position: relative;
	word-break: normal;
}

/* Render the username above the caret */
.ProseMirror .collaboration-cursor__label {
	border-radius: 3px 3px 3px 0;
	color: #eee;
	font-size: 12px;
	font-style: normal;
	font-weight: 600;
	left: -1px;
	line-height: normal;
	padding: 0.1rem 0.3rem;
	position: absolute;
	top: -1.4em;
	user-select: none;
	white-space: nowrap;
}

.font-select {
	display: inline-block;
	width: 155px;
	height: 30px;
	padding-left: 10px;
	border-radius: 5px;
	border: 1px solid lightgrey;
	color: rgba(199, 29, 35, 1);
	font-size: 14px;
}

.font-select:focus-visible {
	outline: 0;
	border: 3px solid rgba(199, 29, 35, 1);
}

.ProseMirror ul,
.ProseMirror ul li {
	list-style-type: circle;
}

.ProseMirror ol,
.ProseMirror ol li {
	list-style-type: decimal;
}

.ProseMirror table {
	margin: 10px auto;
	table-layout: fixed;
	width: 100%;
	overflow: hidden;
}


.ProseMirror th,
.ProseMirror td {
	text-overflow: ellipsis;
	white-space: break-spaces;
}

.ProseMirror td {
	min-width: 20px;
}

.temp-container {
	display: flex;
	/* width: 1200px; */
	/* overflow-x: scroll; */
}

.temp-container ul {
	max-height: 70px;
	overflow-y: auto;
	color: yellow
}

/* .has-focus {
	border-radius: 10px;
	padding: 5px 0;
	box-shadow: 0 0 6px 3px rgb(199, 29, 35);
	transition: all cubic-bezier(0.165, 0.84, 0.44, 1) 0.5s
} */

.flex {
	display: flex;
	justify-content: space-evenly;
	width: 100%
}

.flex div {
	flex: none;
}

.edit-history {
	display: flex;
	align-items: center;
	position: relative;
}

.edit-history button {
	height: 70px;
	margin-right: 0px;
}

.formats>div {
	display: flex;
	justify-content: space-between;
	margin-left: 20px;
	margin-right: 10px;
}

.formats>div:first-child {
	margin-top: 15px;
	margin-bottom: 10px;
}

.formats button {
	margin: 0;
	margin-right: 10px;
	padding: 0;
	width: 30px;
	height: 30px;
	display: flex;
	justify-content: center;
	align-items: center;
}

.headers {
	width: 1000px;
	display: flex;
}

.headers button {
	margin: 0;
	margin-top: 15px;
	margin-right: 5px;
	height: 70px;
	display: flex;
	justify-content: center;
	align-items: center;
}

.headers button:nth-child(1) {
	width: 70px;
}

.headers button:nth-child(2) {
	width: 70px;
}

.headers button:nth-child(3) {
	width: 70px;
}

.headers button:nth-child(4) {
	width: 70px;
}

.headers button:nth-child(5) {
	width: 70px;
}

.headers button:nth-child(6) {
	width: 70px;
}

@keyframes rotate {
	0% {
		transform: rotate(0deg);
	}

	100% {
		transform: rotate(360deg);
	}
}

@keyframes shining {
	0% {
		background: #04a019;
		box-shadow: rgba(21, 198, 1, 0.3) 0 0 5px;
	}

	50% {
		background: #15c601;
		box-shadow: rgba(21, 198, 1, 1) 0 0 10px;
	}

	100% {
		background: #04a019;
		box-shadow: rgba(21, 198, 1, 0.3) 0 0 5px;
	}
}
</style>

<style lang="scss" scoped>
/* 目录区 */

.toc {
	opacity: 0.75;
	border-radius: 0.5rem;
	padding: 0.75rem;
	background: rgba(black, 0.1);
	position: fixed;
	z-index: 100;
	left: 0;
	top: 100px;
	width: 300px;
	padding-left: 20px;
	height: calc(100% - 150px);
	overflow-y: auto;
	word-break: break-all;
	transform: translateX(-340px);

	&__list {
		padding: 0;

		// 标题栏
		&::before {
			display: block;
			content: "目录";
			text-align: center;
			font-weight: 700;
			letter-spacing: 0.05rem;
			font-size: 30px;
			text-transform: uppercase;
			opacity: 0.5;
		}
	}
}

.toc__item {

	line-height: 2rem;

	* {
		transition: all linear 1.5s;
	}

	a:hover {
		opacity: 0.5;
	}

	&--1 {
		span {
			font-size: 25px;
			font-weight: 700;
		}
	}

	&--2 {
		padding-left: 15px;

		span {
			font-size: 20px;
			font-weight: 700;
		}
	}

	&--3 {
		padding-left: 30px;

		span {
			font-size: 18px;
			font-weight: 700;
		}
	}

	&--4 {
		padding-left: 40px;

		span {
			font-size: 18px;
		}
	}

	&--5 {
		padding-left: 50px;

		span {
			font-size: 17px;
		}
	}

	&--6 {
		padding-left: 60px;

		span {
			font-size: 16px;
		}
	}
}

@keyframes out {
	from {
		transform: translateX(-340px);
		opacity: 0;
	}	
	to {
		transform: translateX(0);
		opacity: 1;
	}
}

.panel-slide-out {
	animation: out ease .5s;
}
.panel-slide-in {
	animation: out ease reverse .5s;
}

.toc a {
	cursor: pointer;
}

.toc a:hover {
	text-decoration: underline;
}

.h3-h6 {
	width: 80px;
	height: 70px;
	display: flex;
	flex-wrap: wrap;
	align-content: space-between;
	margin-top: 15px;
}

.h3-h6 button {
	width: 30px;
	height: 30px;
	display: block;
	// display: flex;
	// justify-items: center;
	// align-content: center;
	margin: 0;
	margin-right: 5px;
	padding: 0;
	padding-left: 2px;
	padding-top: 3px;
}
.h3-h6 button svg {
	margin: 0 auto;
}

.headers>button:first-of-type,
.headers>button:nth-of-type(2) {
	width: 50px;
}

.headers>button:nth-of-type(2) {
	position: relative;
}
.headers>button:nth-of-type(2):hover {
	transform: scale(1);
}

.table-dropdown {
	position: absolute;
	top: 115%;
	// left: 20px;
	height: 200px;
	overflow-y: auto;
	background: white;
	box-shadow: -1px 1px 10px grey;
	border-radius: 10px;
}
.table-dropdown button {
	width: 150px;
	height: 30px;
	margin: 0;
	background: transparent;
	margin: 10px 10px;
	box-shadow: 1px 1px 5px grey;
}

.merge-cell, .delete-table {
	width: 30px !important;
	height: 30px;
	display: block;
	padding: 0;
	padding-left: 1px;
	padding-top: 2px;
	margin: 0;
	margin-right: 5px;
}
.merge-cell {
	margin-top: 15px;
	margin-bottom: 10px;
}


</style>